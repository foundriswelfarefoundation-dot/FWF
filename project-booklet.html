<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Project Booklet — FWF</title>
  <link rel="icon" href="assets/images/logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Booklet Container */
    .booklet {
      width: 100%;
      max-width: 900px;
      min-height: 600px;
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
      perspective: 2000px;
    }

    /* Page Container (for flipping) */
    .page-container {
      width: 100%;
      height: 100%;
      min-height: 600px;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .page {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      padding: 60px;
      display: none;
    }

    .page.active {
      display: block;
    }

    /* Page turn animation — desktop 3D flip */
    .turning-left {
      animation: pageFlipLeft 0.6s ease forwards;
    }
    .turning-right {
      animation: pageFlipRight 0.6s ease forwards;
    }
    @keyframes pageFlipLeft {
      0%   { transform: rotateY(0deg); opacity: 1; }
      100% { transform: rotateY(-90deg); opacity: 0; }
    }
    @keyframes pageFlipRight {
      0%   { transform: rotateY(-90deg); opacity: 0; }
      100% { transform: rotateY(0deg);  opacity: 1; }
    }
    /* Mobile: disable 3D, use fade */
    @media (max-width: 768px) {
      .turning-left  { animation: mobileFadeOut 0.3s ease forwards; }
      .turning-right { animation: mobileFadeIn  0.3s ease forwards; }
      @keyframes mobileFadeOut { from { opacity: 1; } to { opacity: 0; } }
      @keyframes mobileFadeIn  { from { opacity: 0; } to { opacity: 1; } }
    }

    /* Cover Page */
    .cover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .cover.active {
      display: flex !important;
    }

    .cover::before {
      content: '';
      position: absolute;
      inset: -50%;
      background: radial-gradient(circle at 30% 50%, rgba(255,255,255,0.04), transparent 50%);
      animation: shimmer 15s linear infinite;
      opacity: 0.3;
    }

    @keyframes shimmer {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .cover-icon {
      font-size: 80px;
      margin-bottom: 24px;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2));
      position: relative;
      z-index: 1;
    }

    .cover-title {
      font-family: 'Playfair Display', serif;
      font-size: 56px;
      font-weight: 900;
      margin-bottom: 16px;
      text-shadow: 0 4px 12px rgba(0,0,0,0.2);
      position: relative;
      z-index: 1;
    }

    .cover-subtitle {
      font-size: 20px;
      opacity: 0.95;
      max-width: 500px;
      line-height: 1.5;
      position: relative;
      z-index: 1;
    }

    .cover-touch {
      position: absolute;
      bottom: 40px;
      font-size: 14px;
      opacity: 0.8;
      animation: pulse 2s ease infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    /* Summary Page */
    .summary .page-title {
      font-family: 'Playfair Display', serif;
      font-size: 36px;
      color: #667eea;
      margin-bottom: 32px;
      padding-bottom: 16px;
      border-bottom: 3px solid #667eea;
    }

    .summary-section {
      margin-bottom: 32px;
    }

    .summary-section h3 {
      font-size: 20px;
      color: #1f2937;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .summary-section h3 i {
      color: #667eea;
      font-size: 18px;
    }

    .summary-section p {
      color: #4b5563;
      line-height: 1.8;
      font-size: 16px;
    }

    .impact-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 12px;
    }

    .impact-badge {
      padding: 8px 16px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      margin-top: 16px;
    }

    .stat-box {
      background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: #667eea;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 13px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Index Page */
    .index .page-title {
      font-family: 'Playfair Display', serif;
      font-size: 36px;
      color: #667eea;
      margin-bottom: 32px;
      text-align: center;
    }

    .index-list {
      display: grid;
      gap: 12px;
      max-height: 450px;
      overflow-y: auto;
      padding-right: 16px;
    }

    .index-list::-webkit-scrollbar {
      width: 6px;
    }

    .index-list::-webkit-scrollbar-thumb {
      background: #667eea;
      border-radius: 10px;
    }

    .index-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      background: linear-gradient(135deg, #f9fafb, #f3f4f6);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
    }

    .index-item:hover {
      background: linear-gradient(135deg, #e0e7ff, #ddd6fe);
      border-left-color: #667eea;
      transform: translateX(8px);
    }

    .index-item-name {
      font-weight: 600;
      color: #1f2937;
      font-size: 15px;
    }

    .index-item-page {
      font-size: 14px;
      color: #6b7280;
      font-weight: 500;
    }

    /* Unit Detail Page */
    .unit-detail .page-title {
      font-family: 'Playfair Display', serif;
      font-size: 30px;
      color: #667eea;
      margin-bottom: 8px;
    }

    .unit-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 32px;
      padding-bottom: 16px;
      border-bottom: 2px solid #e5e7eb;
    }

    .unit-meta-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #4b5563;
    }

    .unit-meta-item i {
      color: #667eea;
    }

    .unit-section {
      margin-bottom: 28px;
    }

    .unit-section h3 {
      font-size: 18px;
      color: #1f2937;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .unit-section h3 i {
      color: #764ba2;
      font-size: 16px;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 12px;
    }

    .product-card {
      background: linear-gradient(135deg, #f0fdf4, #dcfce7);
      padding: 16px;
      border-radius: 10px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
      color: #166534;
      border: 2px solid #86efac;
    }

    .finance-box {
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      border: 2px solid #fbbf24;
      border-radius: 12px;
      padding: 20px;
      margin-top: 16px;
    }

    .finance-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid rgba(251, 191, 36, 0.3);
    }

    .finance-row:last-child {
      border-bottom: none;
    }

    .finance-label {
      font-size: 14px;
      color: #92400e;
      font-weight: 500;
    }

    .finance-value {
      font-size: 16px;
      font-weight: 700;
      color: #78350f;
    }

    /* Navigation */
    .nav-controls {
      position: absolute;
      bottom: 24px;
      right: 24px;
      display: flex;
      gap: 12px;
      z-index: 10;
    }

    .nav-btn {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-btn:hover:not(:disabled) {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }

    .nav-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .page-counter {
      position: absolute;
      bottom: 24px;
      left: 24px;
      font-size: 14px;
      color: #6b7280;
      font-weight: 600;
      background: rgba(255, 255, 255, 0.9);
      padding: 8px 16px;
      border-radius: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.3);
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      color: #fff;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .close-btn:hover {
      background: rgba(255,255,255,0.25);
      transform: rotate(90deg);
    }

    @media (max-width: 768px) {
      /* ═══════ MOBILE E-BOOK READER ═══════ */

      /* Full-screen reader layout */
      body {
        padding: 0; margin: 0;
        background: #0f172a;
        overflow: hidden;
        height: 100dvh;
        display: block;
      }

      .booklet {
        width: 100%; max-width: 100%;
        min-height: 100dvh; height: 100dvh;
        border-radius: 0; box-shadow: none;
        display: flex; flex-direction: column;
        overflow: hidden;
        background: #fff;
      }

      /* ── Top bar (page info + close) ── */
      .mob-topbar {
        display: flex !important;
        align-items: center; justify-content: space-between;
        padding: 10px 14px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        flex-shrink: 0;
        z-index: 30;
      }
      .mob-topbar .mob-title {
        font-size: 13px; font-weight: 700; color: #fff;
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        max-width: 60%;
      }
      .mob-topbar .mob-pages {
        font-size: 11px; font-weight: 700; color: rgba(255,255,255,.8);
        background: rgba(0,0,0,.15); padding: 4px 10px; border-radius: 12px;
      }
      .mob-topbar .mob-close {
        background: rgba(255,255,255,.2); border: none; border-radius: 50%;
        width: 30px; height: 30px; color: #fff; font-size: 15px;
        display: flex; align-items: center; justify-content: center;
        cursor: pointer; flex-shrink: 0;
      }

      /* ── Page viewport — single page at a time ── */
      .mob-viewport {
        display: block !important;
        flex: 1; overflow-y: auto; overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        position: relative;
        scroll-behavior: smooth;
      }

      /* Pages — only active visible, full reader */
      .page {
        position: absolute !important;
        inset: 0;
        display: none !important;
        overflow-y: auto;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        padding: 20px 16px 24px;
        min-height: auto; height: auto;
        background: #fff;
        animation: none !important;
      }
      .page.active {
        display: block !important;
        position: relative !important;
      }

      /* Slide transitions */
      .page.slide-in-right  { display: block !important; position: relative !important; animation: slideInRight  .35s ease forwards !important; }
      .page.slide-in-left   { display: block !important; position: relative !important; animation: slideInLeft   .35s ease forwards !important; }
      .page.slide-out-left  { display: block !important; position: absolute !important; animation: slideOutLeft  .35s ease forwards !important; }
      .page.slide-out-right { display: block !important; position: absolute !important; animation: slideOutRight .35s ease forwards !important; }

      @keyframes slideInRight  { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
      @keyframes slideInLeft   { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
      @keyframes slideOutLeft  { from { transform: translateX(0); opacity: 1; } to { transform: translateX(-100%); opacity: 0; } }
      @keyframes slideOutRight { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }

      /* ── Cover (no scroll, centered) ── */
      .cover {
        min-height: 100% !important; height: auto;
        padding: 40px 20px !important;
        flex-direction: column;
        align-items: center; justify-content: center;
        background: linear-gradient(135deg, #667eea, #764ba2);
        overflow: hidden;
      }
      .page.cover.active {
        display: flex !important;
      }
      .cover-icon  { font-size: 52px; margin-bottom: 16px; }
      .cover-title { font-size: 28px; word-break: break-word; }
      .cover-subtitle { font-size: 14px; max-width: 90%; }
      .cover-touch { position: relative; bottom: auto; margin-top: 32px; font-size: 13px; }

      /* ── Content pages ── */
      .page-title { font-size: 20px !important; margin-bottom: 14px !important; }

      .summary-section { margin-bottom: 18px; }
      .summary-section h3 { font-size: 14px; margin-bottom: 8px; }
      .summary-section p  { font-size: 13px; line-height: 1.65; }

      .impact-badge { font-size: 11px; padding: 5px 10px; }

      .stats-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px; }
      .stat-box { padding: 12px 10px; }
      .stat-value { font-size: 16px; }
      .stat-label { font-size: 10px; }

      .index .page-title { font-size: 20px !important; }
      .index-list { max-height: none; padding-right: 0; gap: 8px; }
      .index-item { padding: 12px 14px; border-radius: 10px; }
      .index-item:hover { transform: translateX(4px); }
      .index-item-name { font-size: 13px; }
      .index-item-page { font-size: 11px; }

      .unit-detail .page-title { font-size: 17px !important; margin-bottom: 6px !important; }
      .unit-meta { gap: 6px 14px; margin-bottom: 14px; flex-wrap: wrap; }
      .unit-meta-item { font-size: 12px; gap: 5px; }

      .unit-section { margin-bottom: 16px; }
      .unit-section h3 { font-size: 13px; margin-bottom: 8px; }
      .products-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
      .product-card { padding: 10px 8px; font-size: 11px; border-radius: 8px; }

      .finance-box { padding: 12px 14px; margin-top: 10px; }
      .finance-row { padding: 8px 0; }
      .finance-label { font-size: 12px; }
      .finance-value { font-size: 13px; }

      /* ── Bottom navigation bar ── */
      .mob-nav {
        display: flex !important;
        align-items: center; justify-content: space-between;
        padding: 8px 14px;
        background: #fff;
        border-top: 1px solid #e5e7eb;
        flex-shrink: 0;
        z-index: 30;
        gap: 8px;
      }
      .mob-nav .mob-btn {
        width: 44px; height: 44px; border-radius: 50%; border: none;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: #fff; font-size: 16px; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
        flex-shrink: 0; transition: opacity .15s, transform .15s;
        box-shadow: 0 3px 10px rgba(102,126,234,.35);
      }
      .mob-nav .mob-btn:disabled { opacity: .3; }
      .mob-nav .mob-btn:active:not(:disabled) { transform: scale(.9); }
      .mob-nav .mob-progress {
        flex: 1; display: flex; flex-direction: column; align-items: center; gap: 4px;
      }
      .mob-nav .mob-progress-bar {
        width: 100%; height: 4px; border-radius: 4px; background: #e5e7eb; overflow: hidden;
      }
      .mob-nav .mob-progress-fill {
        height: 100%; border-radius: 4px;
        background: linear-gradient(90deg, #667eea, #764ba2);
        transition: width .35s ease;
      }
      .mob-nav .mob-progress-text {
        font-size: 10px; font-weight: 700; color: #6b7280;
      }

      /* Hide desktop-only elements on mobile */
      .nav-controls { display: none !important; }
      .page-counter { display: none !important; }
      .close-btn { display: none !important; }

      /* Swipe hint animation on cover */
      .swipe-hint {
        display: flex; align-items: center; gap: 6px;
        font-size: 12px; color: rgba(255,255,255,.7); margin-top: 12px;
        animation: swipeHint 2s ease infinite;
      }
      @keyframes swipeHint {
        0%, 100% { transform: translateX(0); opacity: .6; }
        50% { transform: translateX(12px); opacity: 1; }
      }
    }

    /* ── Product Detail Modal ── */
    .prod-modal-overlay {
      display: none; position: fixed; inset: 0; z-index: 2000;
      background: rgba(0,0,0,.55); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);
      align-items: flex-end; justify-content: center;
    }
    .prod-modal-overlay.open { display: flex; }
    .prod-modal {
      background: #fff; width: 100%; max-width: 580px; max-height: 90dvh;
      border-radius: 22px 22px 0 0; display: flex; flex-direction: column;
      overflow: hidden; animation: pmdSlideUp .35s cubic-bezier(.32,1,.32,1);
    }
    @keyframes pmdSlideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .prod-modal-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 18px 20px 14px; border-bottom: 1px solid #f0f0f0; flex-shrink: 0;
    }
    .prod-modal-header h2 { font-size: 17px; font-weight: 700; color: #111; flex: 1; margin-right: 12px; }
    .prod-modal-close {
      width: 34px; height: 34px; border: none; cursor: pointer;
      background: #f3f4f6; border-radius: 50%; font-size: 16px;
      display: flex; align-items: center; justify-content: center; color: #374151;
      transition: background .15s;
    }
    .prod-modal-close:hover { background: #e5e7eb; }
    .prod-modal-body { overflow-y: auto; flex: 1; padding: 16px 20px 40px; -webkit-overflow-scrolling: touch; }
    /* Overview grid */
    .pmd-overview { display: grid; grid-template-columns: repeat(3,1fr); gap: 8px; margin-bottom: 16px; }
    .pmd-ov-item { background: #f0f4ff; border-radius: 10px; padding: 10px 8px; text-align: center; border: 1px solid #dde6ff; }
    .pmd-ov-label { font-size: 10px; color: #6b7280; font-weight: 600; margin-bottom: 4px; text-transform: uppercase; }
    .pmd-ov-value { font-size: 12px; font-weight: 700; color: #1e40af; }
    /* Section title */
    .pmd-title { font-size: 13px; font-weight: 700; color: #111; margin: 14px 0 8px; display: flex; align-items: center; gap: 6px; }
    .pmd-title i { color: #667eea; }
    /* Table */
    .pmd-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; border-bottom: 1px solid #f3f4f6; font-size: 12px; }
    .pmd-total { display: flex; justify-content: space-between; padding: 8px 12px; margin-top: 6px; background: #f0fdf4; border-radius: 8px; font-weight: 700; font-size: 13px; color: #15803d; }
    /* Investment */
    .pmd-inv-row { display: flex; justify-content: space-between; padding: 8px 12px; background: #f9fafb; border-radius: 8px; font-size: 12px; margin-bottom: 4px; }
    .pmd-inv-grand { display: flex; justify-content: space-between; padding: 10px 14px; background: #1e40af; border-radius: 8px; color: #fff; font-weight: 700; font-size: 14px; margin-top: 4px; }
    /* Funding */
    .pmd-fund-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 8px; }
    .pmd-fund-box { padding: 12px 10px; border-radius: 10px; text-align: center; }
    .pmd-fund-pct { font-size: 24px; font-weight: 800; margin-bottom: 2px; }
    .pmd-fund-label { font-size: 11px; font-weight: 600; margin-bottom: 4px; }
    .pmd-fund-amt { font-size: 13px; font-weight: 700; }
    .pmd-fund-total { padding: 10px 14px; background: #1f2937; border-radius: 8px; display: flex; justify-content: space-between; color: #fff; font-size: 13px; font-weight: 700; }
    /* EMI */
    .pmd-emi-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .pmd-emi-item { padding: 10px; background: #f9fafb; border-radius: 8px; text-align: center; }
    .pmd-emi-item.highlight { background: #dcfce7; border: 1.5px solid #22c55e; }
    .pmd-emi-label { font-size: 10px; color: #6b7280; font-weight: 600; margin-bottom: 4px; text-transform: uppercase; }
    .pmd-emi-value { font-size: 14px; font-weight: 700; color: #111; }
    .pmd-emi-item.highlight .pmd-emi-value { color: #15803d; font-size: 16px; }
    /* Profit */
    .pmd-profit { padding: 14px 16px; border-radius: 10px; background: linear-gradient(135deg,#f0fdf4,#dcfce7); border: 1.5px solid #22c55e; display: flex; align-items: center; justify-content: space-between; gap: 8px; }
    .pmd-profit-label { font-size: 12px; font-weight: 600; color: #166534; }
    .pmd-profit-value { font-size: 18px; font-weight: 800; color: #15803d; }
    /* Clickable product card */
    .product-card.has-detail {
      cursor: pointer; position: relative;
      transition: transform .15s, box-shadow .15s, background .15s, border-color .15s;
    }
    .product-card.has-detail::after {
      content: '↗'; position: absolute; top: 5px; right: 8px;
      font-size: 11px; color: #667eea; font-weight: 700;
    }
    .product-card.has-detail:hover,
    .product-card.has-detail:active {
      background: linear-gradient(135deg,#eef2ff,#f5f3ff) !important;
      border-color: #667eea !important; color: #4338ca;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102,126,234,.25);
    }
    /* Desktop modal: centered + scale-in */
    @media (min-width: 769px) {
      .prod-modal-overlay { align-items: center; }
      .prod-modal {
        border-radius: 20px; max-width: 560px; max-height: 85vh;
        animation: pmdScaleIn .28s cubic-bezier(.32,1,.32,1);
      }
      @keyframes pmdScaleIn { from { transform: scale(.92); opacity: 0; } to { transform: scale(1); opacity: 1; } }
      .pmd-overview { grid-template-columns: repeat(4,1fr); }

      /* ── Desktop unit-detail: scrollable within booklet ── */
      .booklet { height: auto; min-height: 600px; overflow: hidden; }
      .unit-detail { overflow-y: auto; overflow-x: hidden; }
      .unit-detail.active {
        overflow-y: auto !important;
        padding-bottom: 80px; /* clear nav buttons */
      }
      /* custom scrollbar for unit detail pages */
      .unit-detail::-webkit-scrollbar { width: 5px; }
      .unit-detail::-webkit-scrollbar-track { background: #f3f4f6; }
      .unit-detail::-webkit-scrollbar-thumb { background: linear-gradient(#667eea,#764ba2); border-radius: 4px; }
    }

    /* ── Hide mobile-only elements on desktop ── */
    .mob-topbar, .mob-nav, .swipe-hint { display: none; }
    .mob-viewport { display: contents; } /* pages pass through on desktop */
  </style>
</head>
<body>
  <div class="booklet" id="booklet">
    <button class="close-btn" onclick="window.history.back()">×</button>

    <!-- Mobile Top Bar -->
    <div class="mob-topbar" id="mobTopbar">
      <div class="mob-title" id="mobTitle">Project Booklet</div>
      <div class="mob-pages" id="mobPages">1 / 10</div>
      <button class="mob-close" onclick="window.history.back()">×</button>
    </div>

    <!-- Mobile Viewport (wraps pages for scroll isolation) -->
    <div class="mob-viewport" id="mobViewport">
    
    <!-- Cover Page -->
    <div class="page cover active" data-page="0">
      <div class="cover-icon" id="coverIcon">
        <i class="fa-solid fa-shield-heart"></i>
      </div>
      <h1 class="cover-title" id="coverTitle">Suraksha</h1>
      <p class="cover-subtitle" id="coverSubtitle">Health & hygiene products for safer communities.</p>
      <div class="cover-touch">
        <i class="fa-solid fa-hand-pointer"></i> Tap next or swipe to explore
      </div>
      <div class="swipe-hint"><i class="fa-solid fa-arrow-right"></i> Swipe left</div>
    </div>

    <!-- Summary Page -->
    <div class="page summary" data-page="1">
      <h2 class="page-title">परिचय / Introduction</h2>
      
      <div class="summary-section">
        <h3><i class="fa-solid fa-info-circle"></i> About This Project</h3>
        <p id="summaryDescription">This project focuses on creating sustainable livelihoods through health and hygiene product manufacturing.</p>
      </div>

      <div class="summary-section">
        <h3><i class="fa-solid fa-bullseye"></i> Impact Areas</h3>
        <div class="impact-badges" id="impactBadges">
          <span class="impact-badge">
            <i class="fa-solid fa-circle-check"></i>
            Employment
          </span>
        </div>
      </div>

      <div class="summary-section">
        <h3><i class="fa-solid fa-chart-simple"></i> Key Statistics</h3>
        <div class="stats-grid" id="statsGrid">
          <div class="stat-box">
            <div class="stat-value">8</div>
            <div class="stat-label">Total Units</div>
          </div>
          <div class="stat-box">
            <div class="stat-value">₹1.5L</div>
            <div class="stat-label">Setup Cost</div>
          </div>
          <div class="stat-box">
            <div class="stat-value">₹40k</div>
            <div class="stat-label">Working Capital</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Index Page -->
    <div class="page index" data-page="2">
      <h2 class="page-title">अनुक्रमणिका / Index</h2>
      <div class="index-list" id="indexList">
        <!-- Dynamically populated -->
      </div>
    </div>

    <!-- Unit Detail Pages (dynamically created) -->

    </div><!-- /.mob-viewport -->

    <!-- Navigation Controls (Desktop) -->
    <div class="nav-controls">
      <button class="nav-btn" id="prevBtn" onclick="prevPage()">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <button class="nav-btn" id="nextBtn" onclick="nextPage()">
        <i class="fa-solid fa-chevron-right"></i>
      </button>
    </div>
    <div class="page-counter" id="pageCounter">Page 1 / 10</div>

    <!-- Mobile Bottom Nav -->
    <div class="mob-nav" id="mobNav">
      <button class="mob-btn" id="mobPrev" onclick="prevPage()"><i class="fa-solid fa-chevron-left"></i></button>
      <div class="mob-progress">
        <div class="mob-progress-bar"><div class="mob-progress-fill" id="mobFill" style="width:0%"></div></div>
        <span class="mob-progress-text" id="mobText">Page 1 of 10</span>
      </div>
      <button class="mob-btn" id="mobNext" onclick="nextPage()"><i class="fa-solid fa-chevron-right"></i></button>
    </div>
  </div>

  <script>
    let currentPage = 0;
    let totalPages = 3;
    let projectData = null;
    let allPages = [];

    /* ═══════ ALL 11 FWF PROJECTS ═══════ */
    const ALL_PROJECTS = {

      "suraksha": {
        key:"suraksha", name:"Suraksha", icon:"fa-shield-heart",
        subtitle:"Health & hygiene products for safer communities.",
        coverGradient:"linear-gradient(135deg,#22c55e,#16a34a)",
        impacts:["Employment","Women Empowerment","Health"],
        description:"Suraksha empowers communities by creating dignified livelihoods through the production of essential health and hygiene products. Each unit is designed to be profitable while addressing critical public health needs.",
        costs:{setup:"₹4.0–7.5L", working:"₹1.0–2.0L", upfront:"₹40k–75k"},
        units:[
          {name:"MediSan Liquids Unit", space:"~260 sqft", workers:"4 workers", profit:"₹60k–90k/m", setup:"₹7,50,000", working:"₹2,00,000", upfront:"₹75,000",
           products:["Handwash (gel/foam)","Antiseptic liquid","Hand rub (70% IPA)","Disinfectant surface spray"],
           capacity:"500–800 L/day", production:"5,000–8,000 bottles/month",
           machinery:{total:"₹2,85,000", items:[{name:"Mixing Tank (SS 300L)",cost:"₹85,500"},{name:"Stirrer/Agitator",cost:"₹38,000"},{name:"Storage Tank",cost:"₹47,500"},{name:"Semi-Auto Filling Machine",cost:"₹66,500"},{name:"Weighing Machine",cost:"₹9,500"},{name:"Sealing Machine",cost:"₹15,200"},{name:"Misc. Tools & Installation",cost:"₹22,800"}]},
           setupBreakdown:{total:"₹85,500", items:[{name:"Shop Setup & Electrical",cost:"₹57,000"},{name:"Trade License",cost:"₹9,500"},{name:"GST Registration",cost:"₹3,800"},{name:"MSME Registration",cost:"₹1,900"},{name:"Branding & Label Design",cost:"₹13,300"}]},
           workingBreakdown:{total:"₹1,99,500", items:[{name:"Surfactants (SLES etc.)",cost:"₹66,500"},{name:"Fragrance & Color",cost:"₹19,000"},{name:"Preservatives & Additives",cost:"₹15,200"},{name:"Bottles & Caps",cost:"₹76,000"},{name:"Labels & Packaging",cost:"₹22,800"}]},
           funding:{beneficiary:"50%",beneficiaryAmt:"₹2,85,000",ngoLoan:"50%",ngoLoanAmt:"₹2,85,000",totalProject:"₹5,70,000"},
           emi:{loanAmount:"₹2,85,000",tenure:"120 months",moratorium:"1 Year",monthlyEMI:"₹2,375"},
           profitDetail:"₹60,000 – ₹90,000 / month"},
          {name:"Antiseptic Liquid Unit", space:"~225 sqft", workers:"2–3 workers", profit:"₹35k–80k/m", setup:"₹8,70,000", working:"₹5,40,000", upfront:"₹87,000",
           products:["Antiseptic liquid","Disinfectant surface spray"],
           capacity:"400–600 L/day", production:"4,000–6,000 bottles/month",
           machinery:{total:"₹2,35,000", items:[{name:"SS Mixing Tank (300L)",cost:"₹75,000"},{name:"Stirrer/Agitator Motor",cost:"₹30,000"},{name:"Storage Tank",cost:"₹35,000"},{name:"Semi-Auto Filling Machine",cost:"₹55,000"},{name:"Testing & Measuring Equipment",cost:"₹20,000"},{name:"Installation & Fittings",cost:"₹20,000"},{name:"Misc. Tools & Equipment",cost:"₹0"}]},
           setupBreakdown:{total:"₹95,000", items:[{name:"Shop Interior & Electrical Setup",cost:"₹50,000"},{name:"Trade License & Local Authority Fees",cost:"₹10,000"},{name:"GST Registration",cost:"₹3,000"},{name:"MSME Registration",cost:"₹2,000"},{name:"Branding, Logo & Label Design",cost:"₹15,000"},{name:"Initial Marketing Expense",cost:"₹15,000"}]},
           workingBreakdown:{total:"₹5,40,000", items:[{name:"Active Ingredients (₹70k × 3)",cost:"₹2,10,000"},{name:"Bottles & Caps (₹60k × 3)",cost:"₹1,80,000"},{name:"Labels & Packaging (₹20k × 3)",cost:"₹60,000"},{name:"Preservatives & Misc. Chemicals (₹30k × 3)",cost:"₹90,000"}]},
           funding:{beneficiary:"50%",beneficiaryAmt:"₹4,35,000",ngoLoan:"50%",ngoLoanAmt:"₹4,35,000",totalProject:"₹8,70,000"},
           emi:{loanAmount:"₹4,35,000",tenure:"120 months",moratorium:"1 Year",monthlyEMI:"₹3,625"},
           profitDetail:"₹35,000 – ₹80,000 / month"},
          {name:"FreshWipe Converting Unit", space:"~240 sqft", workers:"4 workers", profit:"₹40k–65k/m", setup:"₹6,00,000", working:"₹1,50,000", upfront:"₹60,000",
           products:["Hygiene wet wipes","Alcohol wipes","Surface wipes (multipurpose)"]},
          {name:"MedBand Unit", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,50,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["Crepe bandage 75/100mm","Elastic bandage","Bandage clips"]},
          {name:"SteriGauze Pack Unit", space:"~220 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹4,00,000", working:"₹1,00,000", upfront:"₹40,000",
           products:["Gauze rolls","Non-woven dressing pads"]},
          {name:"PPE Lite Pack Unit", space:"~200 sqft", workers:"3 workers", profit:"₹25k–38k/m", setup:"₹4,25,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["Bouffant caps","Shoe covers"]},
          {name:"FirstAid & ClinicKit Unit", space:"~220 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹4,00,000", working:"₹1,00,000", upfront:"₹40,000",
           products:["First-aid kits","Clinic starter kits"]},
          {name:"VectorGuard Repellent Unit", space:"~240 sqft", workers:"3 workers", profit:"₹35k–55k/m", setup:"₹5,50,000", working:"₹1,40,000", upfront:"₹55,000",
           products:["Mosquito cream/gel","Roll-on repellent","Patches"]},
          {name:"HomeShield Net & Mesh Unit", space:"~260 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹4,75,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Bed nets","Window/door mesh kits","Velcro installer kit"]}
        ]
      },

      "swachh-bharat": {
        key:"swachh-bharat", name:"Swachh Bharat", icon:"fa-soap",
        subtitle:"Home & surface care units for cleaner cities.",
        coverGradient:"linear-gradient(135deg,#3b82f6,#1d4ed8)",
        impacts:["Employment","Sustainability"],
        description:"Swachh Bharat creates livelihood opportunities through manufacturing affordable home and surface care products, contributing to cleaner cities while giving women a steady income.",
        costs:{setup:"₹4.25–7.0L", working:"₹1.1–1.75L", upfront:"₹45k–70k"},
        units:[
          {name:"HomeCare Liquids Blend–Fill", space:"~280 sqft", workers:"4 workers", profit:"₹45k–70k/m", setup:"₹7,00,000", working:"₹1,75,000", upfront:"₹70,000",
           products:["Floor/phenyl cleaner","Glass cleaner","Toilet cleaner","Multi-surface cleaner"]},
          {name:"Dishwash & Kitchen Care", space:"~240 sqft", workers:"3 workers", profit:"₹30k–50k/m", setup:"₹5,00,000", working:"₹1,25,000", upfront:"₹50,000",
           products:["Dishwash gel","Steel polish","Descaler"]},
          {name:"Laundry Care", space:"~280 sqft", workers:"4 workers", profit:"₹45k–70k/m", setup:"₹7,00,000", working:"₹1,75,000", upfront:"₹70,000",
           products:["Liquid detergent","Fabric conditioner","Stain remover"]},
          {name:"SoftSheet Tissue Converting", space:"~300 sqft", workers:"4 workers", profit:"₹35k–55k/m", setup:"₹6,00,000", working:"₹1,50,000", upfront:"₹60,000",
           products:["Kitchen towels","Toilet tissue","Facial tissue"]},
          {name:"ScrubCraft Scrub & Scour", space:"~200 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,25,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["Scrub pads","Metal/nylon scourers"]},
          {name:"CleanTools Assembly", space:"~220 sqft", workers:"3 workers", profit:"₹25k–38k/m", setup:"₹4,25,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["Mops","Wipers","Caddies"]},
          {name:"AromaShield Block & Gel", space:"~220 sqft", workers:"3 workers", profit:"₹35k–55k/m", setup:"₹5,25,000", working:"₹1,30,000", upfront:"₹55,000",
           products:["Toilet blocks","Gel air fresheners"]},
          {name:"EcoBag Seal (Garbage Bags)", space:"~240 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹4,75,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Garbage bag rolls (S/M/L)"]}
        ]
      },

      "happy-meal": {
        key:"happy-meal", name:"Happy Meal", icon:"fa-bowl-food",
        subtitle:"Safe & value-added foods made locally.",
        coverGradient:"linear-gradient(135deg,#f59e0b,#d97706)",
        impacts:["Nutrition","Local Economy","Employment"],
        description:"Happy Meal creates employment through local food processing, enabling women to produce high-quality packaged foods, spices, and ready-to-cook products for households and institutions.",
        costs:{setup:"₹4.5–7.75L", working:"₹1.1–1.9L", upfront:"₹45k–80k"},
        units:[
          {name:"SpiceCrafter Masala", space:"~260 sqft", workers:"4 workers", profit:"₹45k–70k/m", setup:"₹7,00,000", working:"₹1,75,000", upfront:"₹70,000",
           products:["Single spices","Blends (garam/chaat/etc.)"]},
          {name:"MixMaster RTC", space:"~280 sqft", workers:"4 workers", profit:"₹55k–85k/m", setup:"₹7,75,000", working:"₹1,90,000", upfront:"₹80,000",
           products:["Dosa/Idli mix","Upma mix","Dhokla mix"]},
          {name:"StaplePack", space:"~240 sqft", workers:"3 workers", profit:"₹28k–40k/m", setup:"₹5,00,000", working:"₹1,25,000", upfront:"₹50,000",
           products:["Atta","Sooji","Rice flour"]},
          {name:"Roast & Sweet", space:"~260 sqft", workers:"4 workers", profit:"₹45k–70k/m", setup:"₹7,00,000", working:"₹1,75,000", upfront:"₹70,000",
           products:["Roasted nuts/peanuts","Khakhra","Chikki/Ladoo"]},
          {name:"PulseGrain Branding", space:"~220 sqft", workers:"3 workers", profit:"₹25k–38k/m", setup:"₹4,50,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["Dals","Rice & millets"]},
          {name:"Dry Chutney & Condiments", space:"~220 sqft", workers:"3 workers", profit:"₹35k–55k/m", setup:"₹5,25,000", working:"₹1,30,000", upfront:"₹55,000",
           products:["Garlic/Peanut/Coconut powders","Podi","Pickle premix"]},
          {name:"Tea/Coffee & Herbal (dry)", space:"~240 sqft", workers:"4 workers", profit:"₹35k–55k/m", setup:"₹5,50,000", working:"₹1,40,000", upfront:"₹55,000",
           products:["Tea premix/bags","Lemonade/Jaljeera sachets"]},
          {name:"Cloud Kitchen (dry base ops)", space:"~300 sqft", workers:"4 workers", profit:"₹60k–90k/m", setup:"₹7,75,000", working:"₹1,90,000", upfront:"₹80,000",
           products:["Dry gravy bases","Marinade/seasoning kits"]}
        ]
      },

      "green-energy": {
        key:"green-energy", name:"Green Energy", icon:"fa-solar-panel",
        subtitle:"Affordable clean-tech assembly & services.",
        coverGradient:"linear-gradient(135deg,#eab308,#ca8a04)",
        impacts:["Green Energy","Employment","Innovation"],
        description:"Green Energy units assemble and service affordable solar and LED products, enabling women entrepreneurs to participate in India's clean energy revolution while building sustainable businesses.",
        costs:{setup:"₹8.5–27.5L", working:"₹2.25–6.5L", upfront:"₹85k–2.75L"},
        units:[
          {name:"BrightLite LED Assembly", space:"~260 sqft", workers:"4 workers", profit:"₹45k–70k/m", setup:"₹12,50,000", working:"₹3,50,000", upfront:"₹1,25,000",
           products:["LED bulb","Batten/tube","Panel light"]},
          {name:"Solar Study Lamp & Lantern", space:"~260 sqft", workers:"4 workers", profit:"₹40k–65k/m", setup:"₹12,00,000", working:"₹3,25,000", upfront:"₹1,20,000",
           products:["Study lamp","Solar lantern"]},
          {name:"Solar Home Lighting Kit", space:"~300 sqft", workers:"4 workers", profit:"₹60k–95k/m", setup:"₹17,50,000", working:"₹4,50,000", upfront:"₹1,75,000",
           products:["Controller","LED lamps","Battery pack"]},
          {name:"Street-Light Head & Battery-Swap", space:"~320 sqft", workers:"4 workers", profit:"₹70k–1.1L/m", setup:"₹22,50,000", working:"₹5,50,000", upfront:"₹2,25,000",
           products:["Street-light heads","Battery swap service"]},
          {name:"Portable Power & DC-UPS", space:"~220 sqft", workers:"3 workers", profit:"₹35k–55k/m", setup:"₹10,00,000", working:"₹2,75,000", upfront:"₹1,00,000",
           products:["Router UPS","USB/DC chargers"]},
          {name:"E-Cycle Conversion & Service", space:"~400 sqft", workers:"5 workers", profit:"₹80k–1.2L/m", setup:"₹27,50,000", working:"₹6,50,000", upfront:"₹2,75,000",
           products:["Hub-motor kits","Install/AMC"]},
          {name:"Solar Components & Wiring Kits", space:"~220 sqft", workers:"3 workers", profit:"₹30k–45k/m", setup:"₹9,00,000", working:"₹2,50,000", upfront:"₹90,000",
           products:["MC4 leads","Combiner boxes"]},
          {name:"O&M Cleaning & AMC", space:"~220 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹8,50,000", working:"₹2,25,000", upfront:"₹85,000",
           products:["Panel cleaning","Testing/repairs"]}
        ]
      },

      "diy-crafts": {
        key:"diy-crafts", name:"DIY Crafts", icon:"fa-gem",
        subtitle:"Creative & custom products with strong margins.",
        coverGradient:"linear-gradient(135deg,#ec4899,#be185d)",
        impacts:["Women Empowerment","Skill Building"],
        description:"DIY Crafts unlocks the creative potential of women artisans by producing handmade, customised products — from jute bags to jewellery and festive hampers — with excellent profit margins.",
        costs:{setup:"₹4.0–5.75L", working:"₹0.8–1.15L", upfront:"₹40k–60k"},
        units:[
          {name:"Jute & Canvas Bags Studio", space:"~260 sqft", workers:"4 workers", profit:"₹30k–48k/m", setup:"₹5,50,000", working:"₹1,10,000", upfront:"₹55,000",
           products:["Tote/Sling/Drawstring","Custom print/branding"]},
          {name:"Jewellery Assembly & Carding", space:"~200 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹4,00,000", working:"₹80,000", upfront:"₹40,000",
           products:["Beaded/oxidized sets"]},
          {name:"PaperCraft & Stationery", space:"~220 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹4,25,000", working:"₹85,000", upfront:"₹45,000",
           products:["Cards","Gift boxes","Notepads"]},
          {name:"Macramé & Home Décor", space:"~220 sqft", workers:"3 workers", profit:"₹22k–34k/m", setup:"₹4,00,000", working:"₹80,000", upfront:"₹40,000",
           products:["Wall hangings","Plant hangers"]},
          {name:"Personalised Print-on-Demand", space:"~260 sqft", workers:"4 workers", profit:"₹35k–55k/m", setup:"₹5,75,000", working:"₹1,15,000", upfront:"₹60,000",
           products:["Mugs","T-shirts","Cushions"]},
          {name:"Festive Hampers & Gifting", space:"~220 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹4,75,000", working:"₹95,000", upfront:"₹50,000",
           products:["Torans","Gift hampers"]},
          {name:"Eco & Upcycled Craft", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,50,000", working:"₹90,000", upfront:"₹45,000",
           products:["Denim upcycle","Chindi rugs"]},
          {name:"Candles & Bath Craft", space:"~220 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹5,00,000", working:"₹1,00,000", upfront:"₹50,000",
           products:["Soy/Beeswax candles","Bath salts"]}
        ]
      },

      "swachh-jal": {
        key:"swachh-jal", name:"Swachh Jal", icon:"fa-droplet",
        subtitle:"Water purification & services for safe drinking.",
        coverGradient:"linear-gradient(135deg,#06b6d4,#0e7490)",
        impacts:["Health","Sustainability"],
        description:"Swachh Jal builds livelihoods around water safety — assembling purifiers, testing kits, and providing installation & maintenance services — while ensuring safe drinking water for communities.",
        costs:{setup:"₹4.5–17.5L", working:"₹1.2–4.5L", upfront:"₹45k–1.75L"},
        units:[
          {name:"PureFlow Gravity & UF", space:"~260 sqft", workers:"4 workers", profit:"₹35k–55k/m", setup:"₹9,00,000", working:"₹2,50,000", upfront:"₹90,000",
           products:["Gravity purifiers","UF purifiers"]},
          {name:"ROPro Assembly & QA", space:"~300 sqft", workers:"5 workers", profit:"₹60k–95k/m", setup:"₹17,50,000", working:"₹4,50,000", upfront:"₹1,75,000",
           products:["RO/UV/UF wall-mounts"]},
          {name:"CartroPack Cartridges & Spares", space:"~220 sqft", workers:"3 workers", profit:"₹35k–55k/m", setup:"₹7,00,000", working:"₹1,90,000", upfront:"₹70,000",
           products:["PP/GAC/CTO cartridges","Housings"]},
          {name:"MediaMix Filtration Repack", space:"~220 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹6,00,000", working:"₹1,60,000", upfront:"₹60,000",
           products:["Carbon","Resin","Iron-removal media"]},
          {name:"AquaTest QA & Field Kits", space:"~200 sqft", workers:"3 workers", profit:"₹22k–34k/m", setup:"₹4,50,000", working:"₹1,20,000", upfront:"₹45,000",
           products:["TDS/pH/Hardness kits"]},
          {name:"TankCare Cleaning & Disinfection", space:"~220 sqft", workers:"3 workers", profit:"₹30k–45k/m", setup:"₹5,50,000", working:"₹1,50,000", upfront:"₹55,000",
           products:["Tank cleaning service"]},
          {name:"HydroServe Install & AMC", space:"~220 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹5,75,000", working:"₹1,60,000", upfront:"₹60,000",
           products:["Install packs","AMC bundles"]},
          {name:"RainWise Harvest & Greywater", space:"~260 sqft", workers:"4 workers", profit:"₹35k–55k/m", setup:"₹7,50,000", working:"₹2,00,000", upfront:"₹75,000",
           products:["First-flush kits","Filters","Reuse kits"]}
        ]
      },

      "samman": {
        key:"samman", name:"Samman", icon:"fa-shirt",
        subtitle:"Apparel manufacturing for steady livelihoods.",
        coverGradient:"linear-gradient(135deg,#8b5cf6,#6d28d9)",
        impacts:["Employment","Women Empowerment"],
        description:"Samman creates dignified employment through garment and apparel manufacturing — from basic stitching units to institutional workwear and footwear assembly — providing steady year-round income.",
        costs:{setup:"₹7.0–12.5L", working:"₹1.6–2.75L", upfront:"₹70k–1.25L"},
        units:[
          {name:"Women's Basics Stitching", space:"~260 sqft", workers:"4 workers", profit:"₹28k–45k/m", setup:"₹8,25,000", working:"₹1,90,000", upfront:"₹85,000",
           products:["Petticoat","Maxi","Simple blouse"]},
          {name:"Men's/Unisex Knits", space:"~280 sqft", workers:"4 workers", profit:"₹40k–65k/m", setup:"₹10,00,000", working:"₹2,25,000", upfront:"₹1,00,000",
           products:["T-shirts","Track pants","Shorts"]},
          {name:"Innerwear Stitching", space:"~240 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹8,50,000", working:"₹2,00,000", upfront:"₹85,000",
           products:["Briefs/Trunks","Camisoles"]},
          {name:"Kids & School Uniform", space:"~300 sqft", workers:"4 workers", profit:"₹40k–65k/m", setup:"₹10,00,000", working:"₹2,25,000", upfront:"₹1,00,000",
           products:["Shirts/Pants/Skirts","House-T"]},
          {name:"Workwear & Institutional", space:"~300 sqft", workers:"4 workers", profit:"₹45k–70k/m", setup:"₹11,00,000", working:"₹2,50,000", upfront:"₹1,10,000",
           products:["Housekeeping","Security","Aprons/Caps"]},
          {name:"Footwear Assembly", space:"~300 sqft", workers:"4 workers", profit:"₹55k–85k/m", setup:"₹12,50,000", working:"₹2,75,000", upfront:"₹1,25,000",
           products:["EVA/PU sandals","School sandals"]},
          {name:"Accessories & Small Goods", space:"~220 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹7,00,000", working:"₹1,60,000", upfront:"₹70,000",
           products:["Scrunchies","Belts","Cloth bags"]},
          {name:"Branding & Finishing", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹7,50,000", working:"₹1,75,000", upfront:"₹75,000",
           products:["Labels","Ironing","QC & Packing"]}
        ]
      },

      "sweet-home": {
        key:"sweet-home", name:"Sweet Home", icon:"fa-house-chimney",
        subtitle:"Home utility products — stitched & assembled.",
        coverGradient:"linear-gradient(135deg,#f97316,#ea580c)",
        impacts:["Employment","Local Economy"],
        description:"Sweet Home units produce essential home textiles and utility products — from bedsheets to curtains and storage solutions — creating steady employment while meeting everyday household needs.",
        costs:{setup:"₹4.75–8.25L", working:"₹1.1–1.9L", upfront:"₹50k–85k"},
        units:[
          {name:"Bed & Bath Linen", space:"~280 sqft", workers:"4 workers", profit:"₹40k–60k/m", setup:"₹8,25,000", working:"₹1,90,000", upfront:"₹85,000",
           products:["Bedsheets","Pillow covers","Towel branding"]},
          {name:"Kitchen & Dining Textiles", space:"~240 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹6,50,000", working:"₹1,50,000", upfront:"₹65,000",
           products:["Tablecloths","Runners","Aprons/Mitts"]},
          {name:"Curtains & Soft Furnishings", space:"~300 sqft", workers:"4 workers", profit:"₹35k–55k/m", setup:"₹7,50,000", working:"₹1,75,000", upfront:"₹75,000",
           products:["Curtains","Cushion/Bolster covers"]},
          {name:"Storage & Organizers", space:"~240 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹6,25,000", working:"₹1,40,000", upfront:"₹65,000",
           products:["Collapsible boxes","Under-bed bags","Wardrobe hangers"]},
          {name:"Floor & Mats", space:"~240 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹6,25,000", working:"₹1,40,000", upfront:"₹65,000",
           products:["Doormats","Rag rugs","Bath mats"]},
          {name:"Cushion & Pillow", space:"~220 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹5,75,000", working:"₹1,30,000", upfront:"₹60,000",
           products:["Fillers","Outer covers","Sofa protectors"]},
          {name:"Home Tool & Repair Kits", space:"~220 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹4,75,000", working:"₹1,10,000", upfront:"₹50,000",
           products:["Basic tool kit","Hook kit","Sewing repair kit"]},
          {name:"Laundry & Organizing Accessories", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹5,25,000", working:"₹1,20,000", upfront:"₹55,000",
           products:["Laundry bags","Hampers","Shoe organizers"]}
        ]
      },

      "hariyali": {
        key:"hariyali", name:"Hariyali", icon:"fa-seedling",
        subtitle:"Green livelihoods with compost & small agri tools.",
        coverGradient:"linear-gradient(135deg,#84cc16,#65a30d)",
        impacts:["Sustainability","Local Economy"],
        description:"Hariyali taps into growing urban farming and green living trends — producing compost, nursery kits, bio-inputs and garden tools — creating eco-friendly livelihoods with consistent demand.",
        costs:{setup:"₹3.5–6.0L", working:"₹0.8–1.5L", upfront:"₹35k–60k"},
        units:[
          {name:"Compost & Potting Media", space:"~260 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,50,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["Vermicompost","Potting mix","Cocopeat"]},
          {name:"Seedling & Nursery Kits", space:"~240 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,25,000", working:"₹1,00,000", upfront:"₹45,000",
           products:["Seed trays","Grow bags","Starter kits"]},
          {name:"Neem & Bio-inputs", space:"~220 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹4,75,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Neem pesticide","Bio-fertilizers","Micro mix"]},
          {name:"Irrigation & Drip Kits", space:"~260 sqft", workers:"3 workers", profit:"₹35k–55k/m", setup:"₹6,00,000", working:"₹1,50,000", upfront:"₹60,000",
           products:["Drip/micro sprinklers","Timer kits"]},
          {name:"Garden Tools & Hardware", space:"~220 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹3,75,000", working:"₹90,000", upfront:"₹40,000",
           products:["Trowel/Pruner","Watering can","Gloves"]},
          {name:"Home Composting Systems", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,25,000", working:"₹1,00,000", upfront:"₹45,000",
           products:["Home composter","Accelerator","Odour mix"]},
          {name:"Garden QA & Test Kits", space:"~200 sqft", workers:"3 workers", profit:"₹20k–30k/m", setup:"₹3,50,000", working:"₹80,000", upfront:"₹35,000",
           products:["pH/TDS pens","Hardness/RC kits"]},
          {name:"Community Green Bundles", space:"~240 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,25,000", working:"₹1,00,000", upfront:"₹45,000",
           products:["Kitchen garden box","School garden kit"]}
        ]
      },

      "worship": {
        key:"worship", name:"Worship", icon:"fa-hands-praying",
        subtitle:"Puja samagri & incense products with local branding.",
        coverGradient:"linear-gradient(135deg,#e11d48,#be123c)",
        impacts:["Local Economy","Women Empowerment"],
        description:"Worship units produce agarbatti, dhoop, camphor, puja essentials and festive kits — tapping into India's consistent devotional product demand while creating dignified employment for women.",
        costs:{setup:"₹4.5–6.25L", working:"₹1.1–1.5L", upfront:"₹45k–65k"},
        units:[
          {name:"Agarbatti & Dhoop", space:"~220 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹5,00,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Sticks","Cones","Carding & pack"]},
          {name:"Camphor & Sambrani", space:"~220 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹5,00,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Camphor tablets","Sambrani cups/blends"]},
          {name:"Fragrance Blend & Attar Fill", space:"~220 sqft", workers:"3 workers", profit:"₹30k–50k/m", setup:"₹5,50,000", working:"₹1,30,000", upfront:"₹55,000",
           products:["Temple blends","Attar/Oils"]},
          {name:"Puja Essentials Pack", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹4,50,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["Wicks","Kumkum/Haldi/Chandan","Diya sets"]},
          {name:"Puja Vastra & Décor", space:"~220 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹5,00,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Altar cloths","Chunri","Torans"]},
          {name:"Thali & Metalware Kitting", space:"~220 sqft", workers:"3 workers", profit:"₹30k–50k/m", setup:"₹5,50,000", working:"₹1,30,000", upfront:"₹55,000",
           products:["Steel/Brass sets","Branding"]},
          {name:"Festival & Ritual Kits", space:"~220 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹5,25,000", working:"₹1,25,000", upfront:"₹55,000",
           products:["Diwali/Navratri kits"]},
          {name:"Temple/B2B Supply", space:"~240 sqft", workers:"3 workers", profit:"₹35k–55k/m", setup:"₹6,25,000", working:"₹1,50,000", upfront:"₹65,000",
           products:["Bulk agarbatti/dhoop/camphor"]}
        ]
      },

      "shiksha": {
        key:"shiksha", name:"Shiksha", icon:"fa-pen-ruler",
        subtitle:"Affordable stationery & learning essentials.",
        coverGradient:"linear-gradient(135deg,#0ea5e9,#0284c7)",
        impacts:["Education","Employment"],
        description:"Shiksha creates employment through production of affordable notebooks, stationery sets, art supplies and school kits — serving the growing demand from schools, students and CSR programs.",
        costs:{setup:"₹4.5–7.75L", working:"₹1.1–1.8L", upfront:"₹45k–80k"},
        units:[
          {name:"Notebook Printing & Binding", space:"~300 sqft", workers:"4 workers", profit:"₹45k–70k/m", setup:"₹7,75,000", working:"₹1,80,000", upfront:"₹80,000",
           products:["A5/A4 notebooks","Long books","Graph/Practical"]},
          {name:"Pen/Pencil & Geometry Kitting", space:"~240 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹5,75,000", working:"₹1,40,000", upfront:"₹60,000",
           products:["Pens/Pencils","Geometry box"]},
          {name:"Art & Craft Supplies Pack", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹5,00,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Crayons/Colours","Brush/Paper kits"]},
          {name:"Folders & PP Stationery", space:"~260 sqft", workers:"3 workers", profit:"₹28k–45k/m", setup:"₹5,50,000", working:"₹1,30,000", upfront:"₹55,000",
           products:["PP Button/Slider","L-Folders"]},
          {name:"School Bag Branding & Pouches", space:"~260 sqft", workers:"3 workers", profit:"₹30k–48k/m", setup:"₹6,00,000", working:"₹1,40,000", upfront:"₹60,000",
           products:["School bags","Pencil pouches"]},
          {name:"Teaching Aids & Charts", space:"~220 sqft", workers:"3 workers", profit:"₹25k–40k/m", setup:"₹5,00,000", working:"₹1,20,000", upfront:"₹50,000",
           products:["Charts/Maps","Flashcards"]},
          {name:"Ready School/CSR Kits", space:"~220 sqft", workers:"3 workers", profit:"₹22k–35k/m", setup:"₹4,50,000", working:"₹1,10,000", upfront:"₹45,000",
           products:["School/Exam/Art kits"]},
          {name:"Classroom Hardware Branding", space:"~280 sqft", workers:"3 workers", profit:"₹30k–50k/m", setup:"₹6,25,000", working:"₹1,50,000", upfront:"₹65,000",
           products:["White/Notice boards"]}
        ]
      }

    }; /* end ALL_PROJECTS */

    const isMobile = window.innerWidth <= 768;
    let isAnimating = false;

    function init() {
      const urlParams = new URLSearchParams(window.location.search);
      const projectKey = urlParams.get('project') || 'suraksha';
      projectData = ALL_PROJECTS[projectKey] || ALL_PROJECTS['suraksha'];

      // Apply cover gradient
      document.querySelector('.cover').style.background = projectData.coverGradient;
      if (!isMobile) document.body.style.background = projectData.coverGradient;

      // Populate cover
      document.getElementById('coverIcon').innerHTML = `<i class="fa-solid ${projectData.icon}"></i>`;
      document.getElementById('coverTitle').textContent = projectData.name;
      document.getElementById('coverSubtitle').textContent = projectData.subtitle;

      // Populate summary
      document.getElementById('summaryDescription').textContent = projectData.description;

      const impactBadges = projectData.impacts.map(impact =>
        `<span class="impact-badge" style="background:${projectData.coverGradient}"><i class="fa-solid fa-circle-check"></i> ${impact}</span>`
      ).join('');
      document.getElementById('impactBadges').innerHTML = impactBadges;

      document.getElementById('statsGrid').innerHTML = `
        <div class="stat-box">
          <div class="stat-value">${projectData.units.length}</div>
          <div class="stat-label">Total Units</div>
        </div>
        <div class="stat-box">
          <div class="stat-value">${projectData.costs.setup}</div>
          <div class="stat-label">Total Project Cost</div>
        </div>
        <div class="stat-box">
          <div class="stat-value">${projectData.costs.working}</div>
          <div class="stat-label">Working Capital</div>
        </div>
        <div class="stat-box">
          <div class="stat-value">${projectData.costs.upfront}</div>
          <div class="stat-label">Upfront Payment</div>
        </div>
      `;

      // Populate index
      const indexList = document.getElementById('indexList');
      indexList.innerHTML = '';
      projectData.units.forEach((unit, index) => {
        const pageNum = index + 3;
        const item = document.createElement('div');
        item.className = 'index-item';
        item.innerHTML = `
          <span class="index-item-name">${unit.name}</span>
          <span class="index-item-page">Page ${pageNum + 1}</span>
        `;
        item.onclick = () => goToPage(pageNum);
        indexList.appendChild(item);
        createUnitPage(unit, pageNum);
      });

      totalPages = 3 + projectData.units.length;
      allPages = document.querySelectorAll('.page');

      // Mobile: set up top bar title & gradient
      if (isMobile) {
        document.getElementById('mobTitle').textContent = projectData.name;
        const topbar = document.getElementById('mobTopbar');
        if (topbar) topbar.style.background = projectData.coverGradient;
        // Match nav button gradient
        document.querySelectorAll('.mob-btn').forEach(btn => {
          btn.style.background = projectData.coverGradient;
        });
        // Hide swipe hint after 4 seconds
        setTimeout(() => {
          const hint = document.querySelector('.swipe-hint');
          if (hint) hint.style.opacity = '0';
        }, 4000);
      }

      updateUI();
    }

    function createUnitPage(unit, pageNum) {
      const page = document.createElement('div');
      page.className = 'page unit-detail';
      page.setAttribute('data-page', pageNum);

      // Store unit in global map for product modal lookup
      if (!window._unitMap) window._unitMap = {};
      const unitKey = unit.name.replace(/[^a-z0-9]/gi, '_');
      window._unitMap[unitKey] = unit;

      const hasDetail = !!(unit.machinery || unit.setupBreakdown || unit.workingBreakdown || unit.funding);
      const productsHTML = unit.products.map(p => {
        if (hasDetail) {
          const safeP = p.replace(/'/g, "\\'");
          return `<div class="product-card has-detail" onclick="showProdDetail('${safeP}','${unitKey}')">${p}</div>`;
        }
        return `<div class="product-card">${p}</div>`;
      }).join('');

      // Generate machinery breakdown if available
      let machineryHTML = '';
      if (unit.machinery && unit.machinery.items) {
        machineryHTML = `
          <div class="unit-section">
            <h3><i class="fa-solid fa-cogs"></i> Machinery & Equipment Costs</h3>
            <div style="font-size:12px;">
              ${unit.machinery.items.map(item => `
                <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #f0f0f0;">
                  <span>${item.name}</span>
                  <strong>${item.cost}</strong>
                </div>
              `).join('')}
              <div style="display:flex;justify-content:space-between;padding:8px 0;font-weight:700;border-top:2px solid #e5e7eb;margin-top:8px;">
                <span>Total Machinery</span>
                <span>${unit.machinery.total}</span>
              </div>
            </div>
          </div>
        `;
      }

      // Generate setup & registration breakdown if available
      let setupHTML = '';
      if (unit.setupBreakdown && unit.setupBreakdown.items) {
        setupHTML = `
          <div class="unit-section">
            <h3><i class="fa-solid fa-building"></i> Setup & Registration Costs</h3>
            <div style="font-size:12px;">
              ${unit.setupBreakdown.items.map(item => `
                <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #f0f0f0;">
                  <span>${item.name}</span>
                  <strong>${item.cost}</strong>
                </div>
              `).join('')}
              <div style="display:flex;justify-content:space-between;padding:8px 0;font-weight:700;border-top:2px solid #e5e7eb;margin-top:8px;">
                <span>Total Setup</span>
                <span>${unit.setupBreakdown.total}</span>
              </div>
            </div>
          </div>
        `;
      }

      // Generate working capital breakdown if available
      let workingHTML = '';
      if (unit.workingBreakdown && unit.workingBreakdown.items) {
        workingHTML = `
          <div class="unit-section">
            <h3><i class="fa-solid fa-cubes"></i> Working Capital (1 Month)</h3>
            <div style="font-size:12px;">
              ${unit.workingBreakdown.items.map(item => `
                <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #f0f0f0;">
                  <span>${item.name}</span>
                  <strong>${item.cost}</strong>
                </div>
              `).join('')}
              <div style="display:flex;justify-content:space-between;padding:8px 0;font-weight:700;border-top:2px solid #e5e7eb;margin-top:8px;">
                <span>Total Working Capital</span>
                <span>${unit.workingBreakdown.total}</span>
              </div>
            </div>
          </div>
        `;
      }

      // Generate funding & EMI section if available
      let fundingHTML = '';
      if (unit.funding && unit.emi) {
        fundingHTML = `
          <div class="unit-section">
            <h3><i class="fa-solid fa-handshake"></i> Funding Structure (NGO Model - 50:50)</h3>
            <div style="font-size:12px;display:grid;grid-template-columns:1fr 1fr;gap:12px;">
              <div style="padding:10px;background:#f0fdf4;border-radius:8px;">
                <div style="color:#15803d;font-weight:700;margin-bottom:4px;">Beneficiary Share</div>
                <div style="font-size:13px;font-weight:700;color:#000;">${unit.funding.beneficiary}</div>
                <div style="font-size:11px;color:#666;margin-top:2px;">${unit.funding.beneficiaryAmt}</div>
              </div>
              <div style="padding:10px;background:#fef3c7;border-radius:8px;">
                <div style="color:#b45309;font-weight:700;margin-bottom:4px;">NGO Loan (0% Interest)</div>
                <div style="font-size:13px;font-weight:700;color:#000;">${unit.funding.ngoLoan}</div>
                <div style="font-size:11px;color:#666;margin-top:2px;">${unit.funding.ngoLoanAmt}</div>
              </div>
            </div>
            <div style="padding:10px;background:#f3f4f6;border-radius:8px;margin-top:10px;font-weight:700;">
              <div style="display:flex;justify-content:space-between;">
                <span>Total Project Cost</span>
                <span>${unit.funding.totalProject}</span>
              </div>
            </div>
            
            <h4 style="margin-top:12px;margin-bottom:8px;font-size:13px;font-weight:700;"><i class="fa-solid fa-calculator"></i> EMI Details</h4>
            <div style="font-size:12px;display:grid;grid-template-columns:1fr 1fr;gap:8px;">
              <div><strong>Loan Amount:</strong><br>${unit.emi.loanAmount}</div>
              <div><strong>Tenure:</strong><br>${unit.emi.tenure}</div>
              <div><strong>Moratorium:</strong><br>${unit.emi.moratorium}</div>
              <div style="background:#dcfce7;padding:8px;border-radius:6px;border:1px solid #22c55e;"><strong style="color:#15803d;">Monthly EMI</strong><br><span style="font-size:14px;font-weight:700;color:#15803d;">${unit.emi.monthlyEMI}</span></div>
            </div>
          </div>
        `;
      }

      page.innerHTML = `
        <h2 class="page-title" style="font-size:22px;margin-bottom:12px">${unit.name}</h2>

        <div class="unit-meta">
          <div class="unit-meta-item"><i class="fa-solid fa-ruler-combined"></i><span>${unit.space}</span></div>
          <div class="unit-meta-item"><i class="fa-solid fa-users"></i><span>${unit.workers}</span></div>
          <div class="unit-meta-item"><i class="fa-solid fa-chart-line"></i><span>Profit: ${unit.profit}</span></div>
          ${unit.capacity ? `<div class="unit-meta-item"><i class="fa-solid fa-industry"></i><span>${unit.capacity}</span></div>` : ''}
        </div>

        <div class="unit-section">
          <h3><i class="fa-solid fa-box"></i> Products / उत्पाद</h3>
          <div class="products-grid">${productsHTML}</div>
        </div>

        ${machineryHTML}
        ${setupHTML}
        ${workingHTML}

        <div class="unit-section">
          <h3><i class="fa-solid fa-indian-rupee-sign"></i> Financial Summary / वित्तीय विवरण</h3>
          <div class="finance-box">
            <div class="finance-row">
              <span class="finance-label">Total Project Cost</span>
              <span class="finance-value">${unit.setup}</span>
            </div>
            <div class="finance-row">
              <span class="finance-label">Working Capital (3 months)</span>
              <span class="finance-value">${unit.working}</span>
            </div>
            <div class="finance-row">
              <span class="finance-label">Beneficiary Upfront</span>
              <span class="finance-value">${unit.upfront}</span>
            </div>
          </div>
          <p style="font-size:10px;color:#9ca3af;margin-top:8px;line-height:1.5">Includes: Machines & Equipment, Licensing (GST/MSME/Trade), Infrastructure, Raw Material, Packaging & Branding, Testing, Training & Installation. 90% inflation buffer applied.</p>
        </div>

        ${fundingHTML}
      `;

      // On mobile, append to viewport; on desktop, append to booklet
      const container = isMobile
        ? document.getElementById('mobViewport')
        : document.getElementById('booklet');
      container.appendChild(page);
    }

    function nextPage() {
      if (currentPage < totalPages - 1) goToPage(currentPage + 1);
    }

    function prevPage() {
      if (currentPage > 0) goToPage(currentPage - 1);
    }

    function goToPage(pageNum) {
      if (pageNum < 0 || pageNum >= totalPages || pageNum === currentPage || isAnimating) return;

      const currentPageEl = allPages[currentPage];
      const nextPageEl = allPages[pageNum];
      const goingForward = pageNum > currentPage;

      if (isMobile) {
        // ── Mobile: slide animation ──
        isAnimating = true;
        const outClass = goingForward ? 'slide-out-left' : 'slide-out-right';
        const inClass  = goingForward ? 'slide-in-right' : 'slide-in-left';

        // Start animations
        currentPageEl.classList.add(outClass);
        nextPageEl.classList.add('active', inClass);

        // After animation completes
        setTimeout(() => {
          currentPageEl.classList.remove('active', outClass);
          nextPageEl.classList.remove(inClass);
          currentPage = pageNum;
          isAnimating = false;
          updateUI();
          // Scroll viewport to top
          const vp = document.getElementById('mobViewport');
          if (vp) vp.scrollTop = 0;
        }, 350);
      } else {
        // ── Desktop: 3D flip animation ──
        isAnimating = true;
        const delay = 550;
        if (goingForward) currentPageEl.classList.add('turning-left');
        else nextPageEl.classList.add('turning-right');

        setTimeout(() => {
          currentPageEl.classList.remove('active', 'turning-left', 'turning-right');
          nextPageEl.classList.remove('turning-left', 'turning-right');
          nextPageEl.classList.add('active');
          currentPage = pageNum;
          isAnimating = false;
          updateUI();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }, delay);
      }
    }

    // ── Swipe support (mobile) ──
    (function initSwipe() {
      const el = isMobile ? document.getElementById('mobViewport') : document;
      if (!el) return;
      let startX = 0, startY = 0, tracking = false;

      el.addEventListener('touchstart', e => {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        tracking = true;
      }, { passive: true });

      el.addEventListener('touchend', e => {
        if (!tracking) return;
        tracking = false;
        const dx = e.changedTouches[0].clientX - startX;
        const dy = e.changedTouches[0].clientY - startY;
        // Only trigger if horizontal swipe is dominant and > 50px
        if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy) * 1.5) {
          dx < 0 ? nextPage() : prevPage();
        }
      }, { passive: true });
    })();

    function updateUI() {
      // Desktop elements
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const pageCounter = document.getElementById('pageCounter');
      if (prevBtn) prevBtn.disabled = currentPage === 0;
      if (nextBtn) nextBtn.disabled = currentPage === totalPages - 1;
      if (pageCounter) pageCounter.textContent = `Page ${currentPage + 1} / ${totalPages}`;

      // Mobile elements
      if (isMobile) {
        const pct = totalPages > 1 ? ((currentPage) / (totalPages - 1)) * 100 : 0;
        const mobPages = document.getElementById('mobPages');
        const mobFill  = document.getElementById('mobFill');
        const mobText  = document.getElementById('mobText');
        const mobPrev  = document.getElementById('mobPrev');
        const mobNext  = document.getElementById('mobNext');

        if (mobPages) mobPages.textContent = `${currentPage + 1} / ${totalPages}`;
        if (mobFill)  mobFill.style.width = pct + '%';
        if (mobText)  mobText.textContent = `Page ${currentPage + 1} of ${totalPages}`;
        if (mobPrev)  mobPrev.disabled = currentPage === 0;
        if (mobNext)  mobNext.disabled = currentPage === totalPages - 1;

        // Disable prev/next styling
        if (mobPrev) mobPrev.style.opacity = currentPage === 0 ? '0.3' : '1';
        if (mobNext) mobNext.style.opacity = currentPage === totalPages - 1 ? '0.3' : '1';
      }
    }

    /* ─── Product Detail Modal ─── */
    function showProdDetail(productName, unitKey) {
      const unit = (window._unitMap || {})[unitKey];
      if (!unit) return;

      document.getElementById('prodModalTitle').textContent = productName;
      let h = '';

      // Overview row
      h += '<div class="pmd-overview">';
      h += `<div class="pmd-ov-item"><div class="pmd-ov-label">Space</div><div class="pmd-ov-value">${unit.space}</div></div>`;
      if (unit.capacity) h += `<div class="pmd-ov-item"><div class="pmd-ov-label">Capacity</div><div class="pmd-ov-value">${unit.capacity}</div></div>`;
      h += `<div class="pmd-ov-item"><div class="pmd-ov-label">Manpower</div><div class="pmd-ov-value">${unit.workers}</div></div>`;
      if (unit.production) h += `<div class="pmd-ov-item"><div class="pmd-ov-label">Production</div><div class="pmd-ov-value">${unit.production}</div></div>`;
      h += '</div>';

      // Machinery
      if (unit.machinery && unit.machinery.items) {
        h += '<div class="pmd-title"><i class="fa-solid fa-cogs"></i> Machinery &amp; Equipment</div>';
        unit.machinery.items.filter(i => i.cost && i.cost !== '₹0').forEach(i => {
          h += `<div class="pmd-row"><span>${i.name}</span><strong>${i.cost}</strong></div>`;
        });
        h += `<div class="pmd-total"><span>Total Machinery</span><span>${unit.machinery.total}</span></div>`;
      }

      // Setup
      if (unit.setupBreakdown && unit.setupBreakdown.items) {
        h += '<div class="pmd-title"><i class="fa-solid fa-building"></i> Setup &amp; Registration</div>';
        unit.setupBreakdown.items.forEach(i => {
          h += `<div class="pmd-row"><span>${i.name}</span><strong>${i.cost}</strong></div>`;
        });
        h += `<div class="pmd-total"><span>Total Setup</span><span>${unit.setupBreakdown.total}</span></div>`;
      }

      // Working Capital
      if (unit.workingBreakdown && unit.workingBreakdown.items) {
        h += '<div class="pmd-title"><i class="fa-solid fa-cubes"></i> Working Capital (3 Months)</div>';
        unit.workingBreakdown.items.forEach(i => {
          h += `<div class="pmd-row"><span>${i.name}</span><strong>${i.cost}</strong></div>`;
        });
        h += `<div class="pmd-total"><span>Total Working Capital</span><span>${unit.workingBreakdown.total}</span></div>`;
      }

      // Investment Summary
      if (unit.machinery || unit.setupBreakdown || unit.workingBreakdown) {
        const grand = unit.funding ? unit.funding.totalProject : unit.setup;
        h += '<div class="pmd-title"><i class="fa-solid fa-table"></i> Total Project Investment</div>';
        if (unit.machinery)        h += `<div class="pmd-inv-row"><span>Machinery &amp; Equipment</span><strong>${unit.machinery.total}</strong></div>`;
        if (unit.setupBreakdown)   h += `<div class="pmd-inv-row"><span>Setup &amp; Registration</span><strong>${unit.setupBreakdown.total}</strong></div>`;
        if (unit.workingBreakdown) h += `<div class="pmd-inv-row"><span>Working Capital (3 Months)</span><strong>${unit.workingBreakdown.total}</strong></div>`;
        h += `<div class="pmd-inv-grand"><span>Grand Total Project Cost</span><span>${grand}</span></div>`;
      }

      // Funding
      if (unit.funding) {
        h += '<div class="pmd-title"><i class="fa-solid fa-handshake"></i> Funding Structure (50:50 NGO Model)</div>';
        h += '<div class="pmd-fund-grid">';
        h += `<div class="pmd-fund-box" style="background:#f0fdf4;border:1.5px solid #bbf7d0;">`;
        h += `<div class="pmd-fund-pct" style="color:#15803d;">${unit.funding.beneficiary}</div>`;
        h += `<div class="pmd-fund-label" style="color:#166534;">Beneficiary Share</div>`;
        h += `<div class="pmd-fund-amt" style="color:#15803d;">${unit.funding.beneficiaryAmt}</div></div>`;
        h += `<div class="pmd-fund-box" style="background:#fef3c7;border:1.5px solid #fde68a;">`;
        h += `<div class="pmd-fund-pct" style="color:#b45309;">${unit.funding.ngoLoan}</div>`;
        h += `<div class="pmd-fund-label" style="color:#92400e;">NGO Loan (0% Interest)</div>`;
        h += `<div class="pmd-fund-amt" style="color:#b45309;">${unit.funding.ngoLoanAmt}</div></div>`;
        h += '</div>';
        h += `<div class="pmd-fund-total"><span>Total Project Cost</span><span>${unit.funding.totalProject}</span></div>`;
      }

      // EMI
      if (unit.emi) {
        h += '<div class="pmd-title"><i class="fa-solid fa-calculator"></i> EMI Details</div>';
        h += '<div class="pmd-emi-grid">';
        h += `<div class="pmd-emi-item"><div class="pmd-emi-label">Loan Amount</div><div class="pmd-emi-value">${unit.emi.loanAmount}</div></div>`;
        h += `<div class="pmd-emi-item"><div class="pmd-emi-label">Tenure</div><div class="pmd-emi-value">${unit.emi.tenure}</div></div>`;
        h += `<div class="pmd-emi-item"><div class="pmd-emi-label">Moratorium</div><div class="pmd-emi-value">${unit.emi.moratorium}</div></div>`;
        h += `<div class="pmd-emi-item highlight"><div class="pmd-emi-label">Monthly EMI</div><div class="pmd-emi-value">${unit.emi.monthlyEMI}</div></div>`;
        h += '</div>';
      }

      // Profit
      if (unit.profitDetail || unit.profit) {
        const profitStr = unit.profitDetail || unit.profit;
        h += '<div class="pmd-title" style="margin-top:16px;"><i class="fa-solid fa-chart-line"></i> Estimated Monthly Profit</div>';
        h += `<div class="pmd-profit"><span class="pmd-profit-label">Monthly Profit Estimate</span><span class="pmd-profit-value">${profitStr}</span></div>`;
        h += '<p style="font-size:10px;color:#9ca3af;margin-top:8px;">EMI is easily manageable from net monthly profit.</p>';
      }

      document.getElementById('prodModalBody').innerHTML = h;
      const ov = document.getElementById('prodModalOverlay');
      ov.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeProdModal(e) {
      if (e && e.target !== document.getElementById('prodModalOverlay')) return;
      document.getElementById('prodModalOverlay').classList.remove('open');
      document.body.style.overflow = '';
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>
  <!-- Product Detail Modal -->
  <div class="prod-modal-overlay" id="prodModalOverlay" onclick="closeProdModal(event)">
    <div class="prod-modal" id="prodModal">
      <div class="prod-modal-header">
        <h2 id="prodModalTitle">Product Details</h2>
        <button class="prod-modal-close" onclick="closeProdModal()"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="prod-modal-body" id="prodModalBody"></div>
    </div>
  </div>

</body>
</html>