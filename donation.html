<!DOCTYPE html>
<html lang="en" data-lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="canonical" href="https://www.fwfindia.org/membership" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large" />
  <meta property="og:url" content="https://www.fwfindia.org/membership" />
  <title>Join FWF | Membership, Donate & Supporter ‚Äî Foundation for Women's Future</title>
  <meta name="description" content="Join FWF as a member (‚Çπ500/month) to access skill training, projects & livelihood support. Donate, support, or partner with us to empower women across India." />
  <meta name="keywords" content="FWF membership, donate NGO India, women empowerment donation, join FWF, supporter India, 80G tax receipt, UPI donate India" />
  <meta name="author" content="Foundris Welfare Foundation" />
  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="FWF India" />
  <meta property="og:title" content="Join FWF | ‚Çπ500/month Membership & Donation" />
  <meta property="og:description" content="Become an FWF member at ‚Çπ500/month. Donate for 80G receipt. Support women's skill development & livelihood programs." />
  <meta property="og:image" content="https://www.fwfindia.org/assets/images/logo.png" />
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Join FWF | Membership & Donation" />
  <meta name="twitter:description" content="Support women empowerment through FWF membership or donation. 80G receipts available." />
  <meta name="twitter:image" content="https://www.fwfindia.org/assets/images/logo.png" />
  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebPage",
        "url": "https://www.fwfindia.org/membership",
        "name": "Join FWF | Membership, Donation & Supporter",
        "description": "Join FWF as a member at ‚Çπ500/month, donate for 80G receipt, or support us to empower women across India.",
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://www.fwfindia.org/" },
            { "@type": "ListItem", "position": 2, "name": "Membership", "item": "https://www.fwfindia.org/membership" }
          ]
        }
      },
      {
        "@type": "DonateAction",
        "name": "Donate to FWF",
        "description": "Support women empowerment through FWF. 80G tax receipt provided for donations above ‚Çπ500.",
        "url": "https://www.fwfindia.org/membership",
        "recipient": { "@type": "NGO", "name": "Foundris Welfare Foundation", "url": "https://www.fwfindia.org" }
      }
    ]
  }
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FWF ‚Äî Donate, Join & Create Impact</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/images/logo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/images/logo.png">
  <link rel="apple-touch-icon" href="assets/images/logo.png">
  <link rel="shortcut icon" href="assets/images/logo.png">

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Plus+Jakarta+Sans:wght@400;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700;800&family=Mukta:wght@400;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>

  <!-- Razorpay Checkout -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="assets/js/fwf.js"></script>

  <style>
    :root{
      --primary:#6153ff; --accent:#22c55e; --deep:#0f172a; --brd:#e3e8f5;
      --pink:#ff416c; --pink2:#ff4757;
      --label:#6153ff; --chip:#f1f5ff; --chip-brd:#dbe3f7;
      --cta:#16a34a; --orange:#fb923c;
    }

    html{scroll-behavior:smooth;background:
      radial-gradient(120vw 85vh at 65% 0,#e0e7ff 0%,#f8fafc 70%),
      linear-gradient(120deg,#f5f5fb 60%,#ece9fa 100%);}
    body{margin:0;font-family:'Plus Jakarta Sans',Montserrat,sans-serif;color:var(--deep);min-height:100vh;overflow-x:hidden;letter-spacing:.01em;padding-top:90px}
    *{box-sizing:border-box}
    a{color:inherit;text-decoration:none}

    /* HEADER */
    .header{position:fixed; inset:0 0 auto 0; height:78px; z-index:200; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,.78); backdrop-filter:blur(14px) saturate(140%); border-bottom:1px solid #dbe3f3; transition:height .22s, border-color .2s, box-shadow .2s, background .2s;}
    .header.scrolled{ height:64px; background:rgba(255,255,255,.88); box-shadow:0 10px 30px rgba(2,6,23,.06); border-bottom-color:#e6eaf4; }
    .H{max-width:1240px;width:100%;padding:0 18px;display:flex;align-items:center;gap:18px}
    .brand{display:inline-flex;align-items:center;gap:10px}
    .brand img{width:52px;height:52px;object-fit:contain;border-radius:14px}
    nav{margin-left:auto;display:flex;align-items:center;gap:14px}
    .navList{display:flex;align-items:center;gap:6px;margin:0;padding:0;list-style:none}
    .navList a{display:inline-flex;align-items:center;padding:10px 14px;border-radius:12px;font-weight:800;color:#0f172a;position:relative}
    .navList a:hover{background:rgba(15,23,42,.06)}
    .lang-switch{display:inline-flex;align-items:center;height:42px;border:1px solid #c7d0e4;border-radius:12px;overflow:hidden;background:#fff}
    .lang-switch button{border:0;background:transparent;padding:0 12px;height:100%;display:inline-flex;align-items:center;font-weight:900;letter-spacing:.08em;cursor:pointer;color:#475569}
    .lang-switch button.active{background:linear-gradient(90deg,#60a5fa22,#a78bfa22);color:#111827}
    .lang-sep{width:1px;background:#e2e8f0}
    .nav-login-btn{display:inline-flex;align-items:center;gap:6px;padding:9px 18px;border-radius:12px;background:#1e3a8a;color:#fff;font-weight:700;font-size:14px;text-decoration:none;transition:.18s;flex-shrink:0;white-space:nowrap}
    .nav-login-btn:hover{background:#1e4fd4}
    @media(max-width:600px){.nav-login-btn .login-text{display:none}.nav-login-btn{padding:9px 11px}}
    .navToggle{display:none;height:42px;width:42px;border-radius:10px;border:1px solid #dbe3f3;background:#fff;cursor:pointer;align-items:center;justify-content:center;font-size:18px}
    @media (max-width:880px){
      .navToggle{display:inline-flex}
      .navList{display:none;position:absolute;left:0;right:0;top:78px;padding:10px 14px;background:rgba(255,255,255,.96);backdrop-filter:blur(10px);
        border-bottom:1px solid #e8edf7;box-shadow:0 14px 26px rgba(2,6,23,.07);flex-direction:column;gap:6px}
      .header.scrolled .navList{top:64px}
      .navList.open{display:flex}
      .lang-switch{display:none}
    }

    /* HERO */
    .mainHero{position:relative; z-index:0; color:#0f172a; min-height:72vh; display:flex; align-items:center; justify-content:center;
      background:
        radial-gradient(1200px 70% at 20% 10%, #a5b4fc33 0%, transparent 60%),
        radial-gradient(1000px 60% at 80% 0%, #22c55e22 0%, transparent 60%),
        linear-gradient(120deg,#f8fafc 55%, #eef2ff 100%); overflow:hidden; text-align:center;}
    .heroLayer.pattern{position:absolute; inset:0; z-index:0; background:
      linear-gradient(90deg,rgba(96,165,250,.08) 1px, transparent 1px) 0 0/28px 28px,
      linear-gradient(0deg, rgba(167,139,250,.08) 1px, transparent 1px) 0 0/28px 28px;
      mask:linear-gradient(to bottom, rgba(0,0,0,.75), rgba(0,0,0,.2)); pointer-events:none;}
    .heroLayer.vignette{position:absolute; inset:0; z-index:0; background:radial-gradient(120% 90% at 50% 0%, transparent 40%, rgba(15,23,42,.14) 100%); pointer-events:none;}
    .heroWrap{ z-index:1; width:100%; max-width:1240px; padding:40px 24px 34px; display:grid; grid-template-columns:1fr; gap:20px; place-items:center; }
    .heroLeft{ display:flex; flex-direction:column; gap:16px; max-width:900px; align-items:center; }
    .heroBadge{display:inline-flex;gap:10px;align-items:center;font-weight:900;letter-spacing:.02em;padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,#e0e7ff,#dcfce7);border:1px solid #dbe3f3;color:#0f172a;box-shadow:0 8px 18px rgba(2,6,23,.06)}
    .heroBadge i{ color:#22c55e; }
    .heroTitle .titleText{
      font-size:clamp(36px,5.6vw,74px);
      font-family:Montserrat,'Plus Jakarta Sans',sans-serif;
      font-weight:900; line-height:1.05; letter-spacing:-.03em;
      background:linear-gradient(135deg,#0f172a 0%, #334155 35%, #22c55e 100%);
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      text-shadow:0 10px 60px #22c55e22;
    }
    .heroTitle{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:0}
    .heroDesc{ font-size:clamp(13px,1.5vw,17px); max-width:720px; margin:6px auto 16px; color:#1f2a44; font-weight:600; font-style:italic; letter-spacing:.01em; text-shadow:0 1px 12px rgba(34,197,94,.12);}
    /* down arrow with color */
    .downArrow{
      width:58px;height:58px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;
      background:linear-gradient(#fff,#fff) padding-box, conic-gradient(#22c55e, #60a5fa, #22c55e) border-box;
      border:2px solid transparent; color:#0f172a; position:relative; margin:10px auto 0;
      box-shadow:0 10px 28px rgba(2,6,23,.10);
      animation:floaty 2.2s ease-in-out infinite;
    }
    .downArrow:after{ content:""; position:absolute; inset:-6px; border-radius:50%; box-shadow:0 0 0 0 rgba(34,197,94,.28); animation:pulse 2.2s ease-out infinite; }
    .downArrow i{ font-size:20px; }
    @keyframes floaty{0%,100%{transform:translateY(0)}50%{transform:translateY(6px)}}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(34,197,94,.28)}70%{box-shadow:0 0 0 14px rgba(34,197,94,0)}100%{box-shadow:0 0 0 0 rgba(34,197,94,0)}}

    /* rest of layout */
    .footer{margin:50px 0 38px;text-align:center;color:#6153ffd6;font-weight:900;font-size:1.1em}
    html[data-lang="hi"] body{font-family:'Noto Sans Devanagari','Mukta','Plus Jakarta Sans',system-ui,sans-serif}

    .tabsWrap{ position:sticky; top:74px; z-index:150; margin:-12px auto 18px; padding:4px 8px; backdrop-filter: blur(8px) saturate(140%); background:rgba(255,255,255,0.92); border:none; border-radius:16px; box-shadow:0 4px 18px rgba(59,130,246,0.08); max-width:700px; display:flex; justify-content:center;}
    .tabs{display:flex; gap:8px; flex-wrap:wrap; justify-content:center; width:100%}
    .tabBtn{appearance:none; border:none; background:#f3f6ff; color:#0f172a; font-weight:900; padding:10px 22px; border-radius:999px; cursor:pointer; letter-spacing:.02em; font-size:1.08rem; box-shadow:0 2px 8px rgba(59,130,246,0.07); transition:background .18s, color .18s, box-shadow .18s; outline:none}
    .tabBtn.active, .tabBtn:hover{ background:linear-gradient(90deg,#6366f1 60%,#22c55e 100%); color:#fff; box-shadow:0 6px 18px rgba(34,197,94,0.10) }

    .main-container{ max-width:1200px; margin:0 auto; padding: 0 18px }
    .section-header{ text-align:center; margin: 40px 0 36px }
    .main-title{ font-size:clamp(32px,6vw,60px); font-weight:900; background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4); background-size:300% 300%; -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; animation: gradientShift 8s ease infinite; margin-bottom:8px }
    .main-subtitle{ font-size:1.05rem; color:#475569; font-weight:700 }
    @keyframes gradientShift{ 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }

    .featureSection{ position:relative; overflow:hidden; border-radius:32px; margin: 26px 0; padding: clamp(48px,6vw,84px) clamp(22px,3vw,44px); color:#fff }
    .featureSection .section-content{ display:grid; grid-template-columns: 1fr 1fr; gap: clamp(24px,4vw,64px); align-items:center }
    .featureSection .content-right{ display:flex; justify-content:center; align-items:center }
    .illustration{ width:min(400px,42vw); height:min(300px,32vw); background: rgba(255,255,255,0.12); border-radius:20px; display:flex; align-items:center; justify-content:center; backdrop-filter: blur(10px); border:1px solid rgba(255,255,255,0.22); position:relative; overflow:hidden }
    .illustration i{ font-size: clamp(72px,10vw,140px); color: rgba(255,255,255,0.9) }
    .section-title{ font-size: clamp(28px,4vw,44px); font-weight:900; margin:0 0 10px; line-height:1.15 }
    .section-description{ font-size: clamp(15px,1.4vw,18px); margin: 0 0 22px; line-height:1.65; font-weight:700 }
    .features-list{ list-style:none; margin:0 0 26px; padding:0 }
    .features-list li{ display:flex; align-items:center; gap:10px; margin:10px 0; font-weight:800 }
    .features-list i{ color:#86efac }
    .cta-button{ padding: 14px 22px; background: rgba(255,255,255,0.18); border: 2px solid rgba(255,255,255,0.35); border-radius: 999px; color: #fff; font-size: 1rem; font-weight: 900; cursor:pointer; transition:.2s; backdrop-filter: blur(10px); display:inline-flex; align-items:center; gap:10px }
    .cta-button:hover{ transform: translateY(-2px) scale(1.03); background: rgba(255,255,255,0.26) }
    .donate{ background:linear-gradient(135deg, var(--pink), var(--pink2)) }
    .rojgar{ background:linear-gradient(135deg, #667eea, #764ba2) }
    .supporter{ background:linear-gradient(135deg, #56ab2f, #a8e6cf) }
    .csr{ background:linear-gradient(135deg, #8360c3, #2ebf91) }
    @media (max-width:980px){ .featureSection .section-content{ grid-template-columns:1fr } .content-right{ order:-1 } .tabsWrap{ top:66px } }

    /* MODALS base */
    .modal{ display:none; position:fixed; z-index:9999; inset:0; align-items:center; justify-content:center; background:rgba(15,23,42,.18); backdrop-filter:blur(4px); }
    .modalCard{ background:#fff; border-radius:18px; max-width:520px; width:96vw; padding:26px 22px; box-shadow:0 8px 40px #0f172a22; position:relative; }
    .modalClose{ position:absolute; top:14px; right:14px; background:none; border:none; font-size:1.5em; cursor:pointer; color:#475569; }

    /* Floating labels */
    .fl-group{ position:relative; margin-bottom:10px; }
    .fl-input{
      width:100%; border-radius:12px; border:2px solid #e7e9f6; background:#fff;
      font-size:.97rem; padding:16px 13px 7px 43px; color:#0f172a; font-weight:700;
      transition:border-color .18s, box-shadow .18s, background .18s; outline:0;
    }
    .fl-input::placeholder{ color:transparent; }
    .fl-input:focus{ border-color:var(--label); box-shadow:0 0 0 3px color-mix(in oklab, var(--label) 30%, transparent); }
    .fl-label{ position:absolute; left:42px; top:10px; font-weight:800; font-size:.93rem; color:var(--label); padding:0 5px; background:transparent; pointer-events:none; transition:.18s; border-radius:6px; }
    .fl-input:focus + .fl-label, .fl-input:not(:placeholder-shown) + .fl-label{ top:-8px; left:36px; font-size:.82rem; background:#fff; box-shadow:0 0 0 6px #fff inset; }
    .fl-icon{ position:absolute; left:13px; top:50%; transform:translateY(-50%); color:#94a3b8; font-size:.97rem; }
    .rupee-chip{ position:absolute; left:54px; top:50%; transform:translateY(-50%); font-weight:900; color:#64748b; }
    .fl-input.amount{ padding-left:98px; }
    .fl-input.amount + .fl-label{ left:82px; }

    .btn-primary{ width:100%; padding:11px 0; background:var(--primary); color:#fff; font-weight:900; border:none; border-radius:11px; font-size:1em; cursor:pointer; transition:.18s;}
    .btn-primary:hover{ filter:brightness(1.05); transform:translateY(-1px) }
    .subtle{ font-size:.85rem; color:#64748b; margin:4px 2px 10px }
    .amount-chips{ display:flex; gap:6px; flex-wrap:wrap; margin:-2px 0 10px; }
    .amount-chip{ padding:6px 10px; border-radius:999px; background:#f1f5ff; border:1px solid #dbe3f7; cursor:pointer; font-weight:900; font-size:.85rem; }
    .amount-chip:hover{ filter:brightness(0.98) }

    /* Donation step-2 */
    .payTitle{ color:var(--orange); font-weight:900; margin:0 0 10px; font-size:1.6rem; }
    .qrBox{ display:flex; justify-content:center; }
    .qrBox img{ width:220px; height:220px; border-radius:14px; background:#fff; box-shadow:0 6px 22px rgba(2,6,23,.10); cursor:pointer; transition:transform .18s, width .18s, height .18s, box-shadow .18s; }
    .qrBox img.zoomed{ width:320px; height:320px; box-shadow:0 10px 34px rgba(2,6,23,.20); }
    .bankList{ font-weight:800; color:#0f172a; margin:12px 0 8px; line-height:1.6; }
    .note{ color:#64748b; font-weight:700; margin:8px 0 14px; }
    .btn-solid{ display:inline-flex; align-items:center; justify-content:center; gap:8px; width:100%; padding:12px 14px; border:none; border-radius:12px; cursor:pointer; font-weight:900; color:#fff; background:#16a34a; box-shadow:0 6px 18px rgba(22,163,74,.25); transition:.18s; }
    .btn-solid:hover{ filter:brightness(1.05); transform:translateY(-1px); }
    .done-wrap{ margin-top:14px; padding:12px; border:1px dashed #dbe3f3; border-radius:12px; display:none; }
    .done-grid{ display:grid; gap:10px; }
    .done-grid input[type="text"]{ width:100%; border:2px solid #e7e9f6; border-radius:10px; padding:10px 12px; font-weight:700; }
    .done-grid input[type="file"]{ border:1px solid #e7e9f6; border-radius:10px; padding:10px; background:#fafbff; }
    .btn-done{ margin-top:10px; width:100%; padding:10px 0; border:none; border-radius:10px; background:var(--primary); color:#fff; font-weight:900; cursor:pointer; }
  </style>
</head>
<body>

<header class="header" id="siteHeader">
  <div class="H">
    <a class="brand" href="/" aria-label="FWF Home">
      <img src="assets/images/logo.png" alt="FWF">
    </a>

    <nav style="flex:1;display:flex;justify-content:center;">
      <ul class="navList" id="navList" style="margin:0 auto;">
        <li><a href="/" data-i18n="nav.home">Home</a></li>
        <li><a href="/csr">CSR</a></li>
        <li><a href="/projects" data-i18n="nav.projects">Projects</a></li>
        <!-- About Us -> link updated -->
        <li><a href="/about" data-i18n="nav.about">About Us</a></li>
      </ul>
    </nav>

    <div class="langDesktop" style="margin-left:auto;">
      <div class="lang-switch" role="group" aria-label="Language switch">
        <button id="btn-hi" type="button">HI</button><div class="lang-sep"></div>
        <button id="btn-en" type="button" class="active">EN</button>
      </div>
    </div>

    <a class="nav-login-btn" href="/member-login"><i class="fa-solid fa-right-to-bracket"></i> <span class="login-text">Login</span></a>
    <button class="navToggle" id="navToggle" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>
  </div>
</header>

<section class="mainHero" id="home">
  <div class="heroLayer pattern"></div>
  <div class="heroLayer vignette"></div>

  <div class="heroWrap">
    <div class="heroLeft">
      <div class="heroBadge"><i class="fa-solid fa-hand-holding-heart"></i><span data-i18n="hero.badge">Small gift. Big livelihood.</span></div>
      <h1 class="heroTitle"><span class="titleText" data-i18n="hero.title">You can be the reason a family smiles</span><span class="emoji" aria-hidden="true">üòä</span></h1>
      <p class="heroDesc" data-i18n="hero.desc">Your small contribution is a new ray of hope for the unemployed.</p>
      <a href="#involved" class="downArrow" aria-label="Scroll to involvement">
        <i class="fa-solid fa-chevron-down"></i>
      </a>
    </div>
  </div>
</section>

<main id="involved" class="main-container">
  <div class="section-header">
    <h1 class="main-title" data-i18n="main.title">Get Involved</h1>
    <p class="main-subtitle" data-i18n="main.subtitle">Choose your path to make a meaningful impact</p>
  </div>

  <div class="tabsWrap" aria-label="Involved navigation">
    <div class="tabs">
      <button class="tabBtn active" data-target="#donate" data-i18n="tab.donate">Donate</button>
      <button class="tabBtn" data-target="#rojgar" data-i18n="tab.membership">Rojgar (Membership)</button>
      <button class="tabBtn" data-target="#supporter" data-i18n="tab.supporter">Supporter</button>
      <button class="tabBtn" data-target="#csr" data-i18n="tab.csr">CSR Tie-up</button>
    </div>
  </div>

  <!-- Donate section (unchanged content) -->
  <section class="featureSection donate" id="donate">
    <div class="section-content">
      <div class="content-left">
        <h2 class="section-title" data-i18n="section.donate.title">Make a Donation</h2>
        <p class="section-description" data-i18n="section.donate.desc">Every ‚Çπ you give helps train skills, fund real projects & open a livelihood door.</p>
        <ul class="features-list">
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.donate.feature1">80G receipt support</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.donate.feature2">Direct impact tracking</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.donate.feature3">UPI / Bank transfer</span></li>
        </ul>
        <button class="cta-button" id="openDonate2" data-i18n="section.donate.btn"><i class="fa-solid fa-heart"></i> Donate Now</button>
      </div>
      <div class="content-right"><div class="illustration"><i class="fa-solid fa-hand-holding-heart"></i></div></div>
    </div>
  </section>

  <!-- Membership -->
  <section class="featureSection rojgar" id="rojgar">
    <div class="section-content">
      <div class="content-left">
        <h2 class="section-title" data-i18n="section.rojgar.title">Membership Program</h2>
        <p class="section-description" data-i18n="section.rojgar.desc">‚Çπ500/month: training, projects, mentoring, job-connect.</p>
        <ul class="features-list">
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.rojgar.feature1">Project labs & gigs</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.rojgar.feature2">Resume & interview help</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.rojgar.feature3">Community support</span></li>
        </ul>
        <button class="cta-button" id="openMember2" data-i18n="section.rojgar.btn"><i class="fa-solid fa-user-plus"></i> Join Now</button>
      </div>
      <div class="content-right"><div class="illustration"><i class="fa-solid fa-user-graduate"></i></div></div>
    </div>
  </section>

  <!-- Supporter -->
  <section class="featureSection supporter" id="supporter">
    <div class="section-content">
      <div class="content-left">
        <h2 class="section-title" data-i18n="section.supporter.title">Supporter Program</h2>
        <p class="section-description" data-i18n="section.supporter.desc">Teach, mentor & help set up micro-business.</p>
        <ul class="features-list">
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.supporter.feature1">Flexible time</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.supporter.feature2">Teach real skills</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.supporter.feature3">Community reach</span></li>
        </ul>
        <button class="cta-button" id="openSupporter2" data-i18n="section.supporter.btn"><i class="fa-solid fa-hands-helping"></i> Sign Up</button>
      </div>
      <div class="content-right"><div class="illustration"><i class="fa-solid fa-people-group"></i></div></div>
    </div>
  </section>

  <!-- CSR -->
  <section class="featureSection csr" id="csr">
    <div class="section-content">
      <div class="content-left">
        <h2 class="section-title" data-i18n="section.csr.title">CSR Tie-up / Corporate Partnership</h2>
        <p class="section-description" data-i18n="section.csr.desc">Projects, internships, hiring ‡§Ø‡§æ CSR ‡§∏‡•á sustainable impact.</p>
        <ul class="features-list">
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.csr.feature1">CSR alignment</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.csr.feature2">Project outsourcing</span></li>
          <li><i class="fa-solid fa-check"></i> <span data-i18n="section.csr.feature3">Direct placements</span></li>
        </ul>
        <button class="cta-button" id="openPartner2" data-i18n="section.csr.btn"><i class="fa-solid fa-building-user"></i> Partner</button>
      </div>
      <div class="content-right"><div class="illustration"><i class="fa-solid fa-city"></i></div></div>
    </div>
  </section>
</main>

<section class="footer">
  <div style="max-width: 1200px; margin: 0 auto; padding: 40px 20px; text-align: center;">
    <div style="border-top: 1px solid #e2e8f0; padding-top: 20px;">
      &copy; <span id="year"></span> FWF ‚Ä¢ Built for creators, collaborators, and changemakers
      <div style="margin-top: 10px;">
        <a href="/privacy" style="color: #6153ff; text-decoration: none;">Privacy Policy</a> ‚Ä¢ <a href="/terms" style="color: #6153ff; text-decoration: none;">Terms & Conditions</a>
      </div>
    </div>
  </div>
</section>

<!-- Donation modal -->
<div id="donateModal" class="modal">
  <div class="modalCard" style="max-width:460px;padding:0;overflow:hidden;border-radius:18px">
    <!-- Header -->
    <div style="background:linear-gradient(135deg,#ff416c,#ff4f81);padding:13px 18px 12px;position:relative">
      <button id="closeDonateModal" class="modalClose" style="top:10px;right:12px;color:#fff;opacity:.85;font-size:1.2em"><i class="fa fa-times"></i></button>
      <div style="display:flex;align-items:center;gap:10px">
        <div style="background:rgba(255,255,255,.18);border-radius:11px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0">‚ù§Ô∏è</div>
        <div>
          <h2 style="margin:0;color:#fff;font-size:1.05rem;font-weight:900">Make a Donation</h2>
          <p style="margin:1px 0 0;color:rgba(255,255,255,.8);font-size:0.75rem">100% secure ¬∑ 80G receipt available</p>
        </div>
      </div>
    </div>

    <div style="padding:14px 18px 16px;max-height:72vh;overflow-y:auto">
    <div id="donateStep1">
      <form id="donateForm" autocomplete="off" novalidate>

        <!-- Amount -->
        <p style="font-size:0.73rem;font-weight:800;color:#64748b;letter-spacing:.06em;text-transform:uppercase;margin:0 0 6px">Select or Enter Amount</p>
        <div class="amount-chips" id="amountChips" style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:8px">
          <button type="button" class="amount-chip" data-amount="200">‚Çπ200</button>
          <button type="button" class="amount-chip" data-amount="500">‚Çπ500</button>
          <button type="button" class="amount-chip" data-amount="1000">‚Çπ1,000</button>
          <button type="button" class="amount-chip" data-amount="2500">‚Çπ2,500</button>
          <button type="button" class="amount-chip" data-amount="5000">‚Çπ5,000</button>
        </div>
        <div class="fl-group"><span class="rupee-chip">‚Çπ</span><input class="fl-input amount" id="donateAmountInput" type="number" min="1" step="1" name="amount" placeholder=" " required /><label class="fl-label">Custom Amount</label></div>

        <!-- Divider -->
        <div style="border-top:1px solid #f1f5f9;margin:10px 0 10px"></div>

        <!-- Personal details -->
        <p style="font-size:0.73rem;font-weight:800;color:#64748b;letter-spacing:.06em;text-transform:uppercase;margin:0 0 8px">Your Details</p>
        <div class="fl-group"><i class="fl-icon fa-regular fa-user"></i><input class="fl-input" name="name" placeholder=" " required /><label class="fl-label">Full Name</label></div>
        <div class="fl-group"><i class="fl-icon fa-solid fa-mobile-screen-button"></i><input class="fl-input" name="mobile" placeholder=" " pattern="[0-9]{10}" maxlength="10" required /><label class="fl-label">Phone (10-digit)</label></div>
        <div class="fl-group"><i class="fl-icon fa-regular fa-envelope"></i><input class="fl-input" type="email" name="email" placeholder=" " required /><label class="fl-label">Email</label></div>

        <!-- 80G Checkbox -->
        <label id="toggle80G" style="display:flex;align-items:center;gap:8px;cursor:pointer;background:#f8faff;border:1.5px solid #dbe3f7;border-radius:10px;padding:8px 11px;margin-bottom:8px;transition:.2s">
          <div style="position:relative;flex-shrink:0">
            <input type="checkbox" id="want80G" style="opacity:0;position:absolute;width:0;height:0">
            <div id="checkBox80G" style="width:18px;height:18px;border-radius:5px;border:2px solid #c7d0e4;background:#fff;display:flex;align-items:center;justify-content:center;transition:.2s">
              <i class="fa-solid fa-check" style="font-size:10px;color:#fff;display:none" id="checkIcon80G"></i>
            </div>
          </div>
          <div>
            <p style="margin:0;font-size:0.82rem;font-weight:800;color:#1e293b">I want 80G Tax Receipt</p>
            <p style="margin:0;font-size:0.71rem;color:#64748b">PAN card required for income tax exemption</p>
          </div>
          <span style="margin-left:auto;background:#fee2e2;color:#dc2626;font-size:0.68rem;font-weight:800;padding:2px 7px;border-radius:20px">Save Tax</span>
        </label>

        <!-- PAN field (hidden by default, shown on 80G tick or amount>=50000) -->
        <div id="panField" style="display:none">
          <div class="fl-group"><i class="fl-icon fa-regular fa-id-card"></i><input class="fl-input" name="pan" id="panInput" placeholder=" " maxlength="10" style="text-transform:uppercase" /><label class="fl-label">PAN Number</label></div>
        </div>

        <!-- Address field (hidden by default, shown when amount>=50000) -->
        <div id="addressField" style="display:none">
          <div style="background:#fff7ed;border:1.5px solid #fed7aa;border-radius:12px;padding:10px 13px;margin-bottom:12px;display:flex;gap:10px;align-items:flex-start">
            <i class="fa-solid fa-triangle-exclamation" style="color:#ea580c;margin-top:2px;flex-shrink:0"></i>
            <p style="margin:0;font-size:0.78rem;color:#9a3412">As per Income Tax Act, address is <strong>mandatory</strong> for donations of ‚Çπ50,000 or more.</p>
          </div>
          <div class="fl-group"><i class="fl-icon fa-solid fa-location-dot"></i><input class="fl-input" name="address" id="addressInput" placeholder=" " /><label class="fl-label">Full Address</label></div>
        </div>

        <!-- Recurring Donation Checkbox -->
        <label id="toggleRecurring" style="display:flex;align-items:center;gap:8px;cursor:pointer;background:#f0f7ff;border:1.5px solid #bfdbfe;border-radius:10px;padding:8px 11px;margin-bottom:8px;transition:.2s">
          <div style="position:relative;flex-shrink:0">
            <input type="checkbox" id="wantRecurring" style="opacity:0;position:absolute;width:0;height:0">
            <div id="checkBoxRecurring" style="width:18px;height:18px;border-radius:5px;border:2px solid #c7d0e4;background:#fff;display:flex;align-items:center;justify-content:center;transition:.2s">
              <i class="fa-solid fa-check" style="font-size:10px;color:#fff;display:none" id="checkIconRecurring"></i>
            </div>
          </div>
          <div>
            <p style="margin:0;font-size:0.82rem;font-weight:800;color:#1e293b">Make it Monthly</p>
            <p style="margin:0;font-size:0.71rem;color:#64748b">Auto-debit every month ¬∑ Cancel anytime from UPI app</p>
          </div>
          <span style="margin-left:auto;background:#dbeafe;color:#1d4ed8;font-size:0.68rem;font-weight:800;padding:2px 7px;border-radius:20px;white-space:nowrap"><i class="fa-solid fa-rotate" style="margin-right:3px"></i>Monthly</span>
        </label>

        <button type="submit" class="btn-primary" style="background:linear-gradient(135deg,#ff416c,#ff4f81);margin-top:4px"><i class="fa-solid fa-arrow-right"></i> Next: Payment</button>
      </form>
    </div>

    <!-- OTP Verification Step (shown for donations ‚â• ‚Çπ50,000) -->
    <div id="donateStepOtp" style="display:none;">
      <h2 style="margin:0 0 6px">Identity Verification</h2>
      <div style="background:linear-gradient(135deg,#fee2e2,#fecaca);border:2px solid #fca5a5;border-radius:14px;padding:14px;margin-bottom:16px;text-align:center">
        <i class="fa-solid fa-shield-halved" style="color:#dc2626;font-size:26px;display:block;margin-bottom:6px"></i>
        <p style="margin:0;font-weight:700;color:#7f1d1d;font-size:0.9rem">High-Value Donation Verification</p>
        <p style="margin:6px 0 0;font-size:0.8rem;color:#991b1b">As per FCRA &amp; Income Tax Act, donations of ‚Çπ50,000 or more require OTP identity verification</p>
      </div>
      <p style="font-size:0.88rem;color:#475569;margin:0 0 16px;text-align:center">OTP will be sent to <strong id="otpEmailDisplay" style="color:#6366f1"></strong></p>
      <div id="otpSendSection">
        <button id="sendOtpBtn" class="btn-primary" style="width:100%"><i class="fa-solid fa-paper-plane"></i> Send OTP to Email</button>
      </div>
      <div id="otpVerifySection" style="display:none;margin-top:4px">
        <div class="fl-group" style="margin-top:12px">
          <i class="fl-icon fa-solid fa-key"></i>
          <input class="fl-input" id="otpInput" placeholder=" " maxlength="6" pattern="[0-9]{6}" inputmode="numeric">
          <label class="fl-label">Enter 6-digit OTP</label>
        </div>
        <button id="verifyOtpBtn" class="btn-primary" style="width:100%;margin-top:8px"><i class="fa-solid fa-check-circle"></i> Verify OTP</button>
        <p style="text-align:center;font-size:0.82rem;color:#94a3b8;margin-top:10px">
          Didn't receive it? <a href="#" id="resendOtpLink" style="color:var(--accent);font-weight:600">Resend OTP</a>
        </p>
      </div>
      <button id="backToFormBtn" style="background:none;border:none;color:#94a3b8;font-size:0.82rem;margin-top:12px;cursor:pointer;width:100%;text-align:center"><i class="fa-solid fa-arrow-left"></i> Back to form</button>
    </div>

    <div id="donateStep2" style="display:none;">
      <h2 class="payTitle">Complete Payment</h2>
      <div style="text-align:center;margin:16px 0">
        <!-- Recurring info (shown only when monthly is selected) -->
        <div id="donateRecurringInfo" style="display:none;background:linear-gradient(135deg,#eff6ff,#dbeafe);border:2px solid #bfdbfe;border-radius:14px;padding:14px;margin-bottom:14px">
          <p style="margin:0 0 2px;font-weight:700;color:#1d4ed8;font-size:0.95rem"><i class="fa-solid fa-rotate" style="margin-right:6px"></i>Monthly Auto-Debit Enabled</p>
          <p style="margin:0;font-size:0.8rem;color:#1e40af">First payment charged now. A UPI AutoPay mandate will be set up for monthly auto-debit. Cancel anytime from your UPI app.</p>
        </div>
        <div style="background:linear-gradient(135deg,#eef2ff,#e0e7ff);border:2px solid #c7d2fe;border-radius:14px;padding:16px;margin-bottom:16px">
          <p style="margin:0 0 4px;font-weight:600;color:#4338ca;font-size:0.95rem">Pay securely via Razorpay</p>
          <div style="display:flex;gap:10px;justify-content:center;margin-top:10px;flex-wrap:wrap">
            <span style="background:#fff;padding:6px 12px;border-radius:8px;font-size:0.85rem;font-weight:700;color:#334155"><i class="fas fa-mobile-alt" style="color:#22c55e"></i> UPI</span>
            <span style="background:#fff;padding:6px 12px;border-radius:8px;font-size:0.85rem;font-weight:700;color:#334155"><i class="fas fa-credit-card" style="color:#3b82f6"></i> Card</span>
            <span style="background:#fff;padding:6px 12px;border-radius:8px;font-size:0.85rem;font-weight:700;color:#334155"><i class="fas fa-university" style="color:#8b5cf6"></i> Net Banking</span>
          </div>
        </div>
        <p style="font-weight:900;font-size:1.4rem;color:#0f172a;margin:12px 0">Amount: ‚Çπ<span id="donateAmountDisplay">0</span><span id="donateAmountSuffix"></span></p>
      </div>
      <button id="razorpayDonateBtn" class="btn-solid" style="background:linear-gradient(135deg,#6153ff,#8b5cf6);font-size:1.05rem;padding:14px 0"><i class="fa-solid fa-lock"></i> Pay Securely Now</button>
      <p style="text-align:center;margin-top:10px;font-size:0.82rem;color:#94a3b8"><i class="fas fa-shield-alt"></i> Secured by Razorpay</p>
    </div>
    </div><!-- /padding wrapper -->
  </div>
</div>

<!-- Membership modal (Project dropdown updated) -->
<div id="memberModal" class="modal">
  <div class="modalCard">
    <button class="modalClose" id="closeMember"><i class="fa fa-times"></i></button>
    <div id="memberStep1">
      <h2 style="margin:0 0 8px">Join Membership</h2>
      <p class="subtle">‚Çπ500/month ‚Äì training, projects, mentoring & job-connect</p>
      <form id="memberForm" autocomplete="on" novalidate>
        <div class="fl-group"><i class="fl-icon fa-regular fa-user"></i><input id="memberName" class="fl-input" name="name" placeholder=" " autocomplete="name" required><label class="fl-label" for="memberName">Full Name</label></div>
        <div class="fl-group"><i class="fl-icon fa-solid fa-mobile-screen-button"></i><input id="memberMobile" class="fl-input" name="mobile" placeholder=" " pattern="[0-9]{10}" maxlength="10" autocomplete="tel" required><label class="fl-label" for="memberMobile">Phone</label></div>
        <div class="fl-group"><i class="fl-icon fa-regular fa-envelope"></i><input id="memberEmail" class="fl-input" type="email" name="email" placeholder=" " autocomplete="email" required><label class="fl-label" for="memberEmail">Email</label></div>
        <!-- Project dropdown -> as per screenshot -->
        <div class="fl-group">
          <i class="fl-icon fa-solid fa-diagram-project"></i>
          <select class="fl-input" name="project" required style="padding-left:48px;">
            <option value="" hidden selected></option>
            <option>Suraksha</option>
            <option>Swachh Bharat</option>
            <option>Happy Meal</option>
            <option>Green Energy</option>
            <option>DIY Crafts</option>
            <option>Swachh Jal</option>
            <option>Samman</option>
            <option>Sweet Home</option>
            <option>Hariyali</option>
            <option>Worship</option>
            <option>Shiksha</option>
          </select>
          <label class="fl-label">Select Project</label>
        </div>
        <button class="btn-primary" type="submit">Proceed to Payment</button>
        <p style="text-align:center; margin-top:16px; font-size:14px; color:#64748b;">
          Already a member? 
          <a href="/login" style="color:#6366f1; font-weight:700; text-decoration:none; transition:color .2s;">
            Login to Dashboard
          </a>
        </p>
      </form>
    </div>
    <div id="memberStep2" style="display:none;">
      <h2 class="payTitle">Complete Payment</h2>
      <div style="text-align:center;margin:16px 0">
        <div style="background:linear-gradient(135deg,#f0fdf4,#dcfce7);border:2px solid #86efac;border-radius:14px;padding:16px;margin-bottom:14px">
          <p style="margin:0 0 2px;font-weight:700;color:#15803d;font-size:0.95rem"><i class="fa-solid fa-rotate" style="margin-right:6px"></i>Monthly Auto-Debit (UPI AutoPay)</p>
          <p style="margin:0;font-size:0.8rem;color:#166534">Your first payment of ‚Çπ500 will be charged now.<br>A UPI AutoPay mandate will be set up for monthly auto-debit.</p>
        </div>
        <div style="background:linear-gradient(135deg,#eef2ff,#e0e7ff);border:2px solid #c7d2fe;border-radius:14px;padding:12px;margin-bottom:14px">
          <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
            <span style="background:#fff;padding:6px 12px;border-radius:8px;font-size:0.85rem;font-weight:700;color:#334155"><i class="fas fa-mobile-alt" style="color:#22c55e"></i> UPI AutoPay</span>
            <span style="background:#fff;padding:6px 12px;border-radius:8px;font-size:0.85rem;font-weight:700;color:#334155"><i class="fas fa-credit-card" style="color:#3b82f6"></i> Card</span>
            <span style="background:#fff;padding:6px 12px;border-radius:8px;font-size:0.85rem;font-weight:700;color:#334155"><i class="fas fa-university" style="color:#8b5cf6"></i> Net Banking</span>
          </div>
        </div>
        <p style="font-weight:900;font-size:1.4rem;color:#0f172a;margin:8px 0">Membership Fee: ‚Çπ<span style="color:#15803d">500</span>/month</p>
      </div>
      <button id="razorpayMemberBtn" class="btn-solid" style="background:linear-gradient(135deg,#6153ff,#8b5cf6);font-size:1.05rem;padding:14px 0"><i class="fa-solid fa-lock"></i> Pay ‚Çπ500 &amp; Enable AutoPay</button>
      <p style="text-align:center;margin-top:10px;font-size:0.82rem;color:#94a3b8"><i class="fas fa-shield-alt"></i> Secured by Razorpay &nbsp;|&nbsp; <i class="fa-solid fa-rotate"></i> Auto-renews monthly</p>
    </div>
  </div>
</div>

<!-- Supporter -->
<div id="supModal" class="modal">
  <div class="modalCard">
    <button class="modalClose" id="closeSupporter"><i class="fa fa-times"></i></button>
    <h2 style="margin:0 0 8px">Supporter Sign Up</h2>
    <p class="subtle">Tell us how you'd like to help</p>
    <form id="supForm" autocomplete="off" novalidate>
      <div class="fl-group"><i class="fl-icon fa-regular fa-user"></i><input class="fl-input" name="name" placeholder=" " required><label class="fl-label">Full Name</label></div>
      <div class="fl-group"><i class="fl-icon fa-solid fa-mobile-screen-button"></i><input class="fl-input" name="mobile" placeholder=" " pattern="[0-9]{10}" maxlength="10" required><label class="fl-label">Phone</label></div>
      <div class="fl-group"><i class="fl-icon fa-regular fa-envelope"></i><input class="fl-input" type="email" name="email" placeholder=" " required><label class="fl-label">Email</label></div>
      <div class="fl-group"><i class="fl-icon fa-solid fa-diagram-project"></i>
        <select class="fl-input" name="project" required style="padding-left:48px;">
          <option value="" hidden selected></option>
          <option>Teaching</option><option>Mentoring</option><option>Admin/Operations</option>
          <option>Social Media</option><option>Fundraising</option><option>Other</option>
        </select>
        <label class="fl-label">Choose Project</label>
      </div>
      <div class="fl-group"><i class="fl-icon fa-regular fa-message"></i><textarea class="fl-input" name="message" placeholder=" " rows="4" style="height:120px; padding-top:18px;"></textarea><label class="fl-label">How would you like to help?</label></div>
      <button class="btn-primary" type="submit">Submit</button>
    </form>
  </div>
</div>

<!-- CSR -->
<div id="partnerModal" class="modal">
  <div class="modalCard">
    <button class="modalClose" id="closePartner"><i class="fa fa-times"></i></button>
    <h2 style="margin:0 0 8px">CSR Partnership</h2>
    <p class="subtle">Projects, internships, hiring or CSR programs</p>
    <form id="partnerForm" autocomplete="off" novalidate>
      <div class="fl-group"><i class="fl-icon fa-solid fa-building"></i><input class="fl-input" name="company" placeholder=" " required><label class="fl-label">Company / Org</label></div>
      <div class="fl-group"><i class="fl-icon fa-regular fa-user"></i><input class="fl-input" name="contact" placeholder=" " required><label class="fl-label">Contact Person</label></div>
      <div class="fl-group"><i class="fl-icon fa-solid fa-mobile-screen-button"></i><input class="fl-input" name="mobile" placeholder=" " pattern="[0-9]{10}" maxlength="10" required><label class="fl-label">Phone</label></div>
      <div class="fl-group"><i class="fl-icon fa-regular fa-envelope"></i><input class="fl-input" type="email" name="email" placeholder=" " required><label class="fl-label">Email</label></div>
      <div class="fl-group"><i class="fl-icon fa-solid fa-message"></i><input class="fl-input" name="message" placeholder=" "><label class="fl-label">Message / Need</label></div>
      <button class="btn-primary" type="submit">Send Request</button>
    </form>
  </div>
</div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();
  const header = document.getElementById('siteHeader');
  const onScroll = () => header.classList.toggle('scrolled', window.scrollY > 6);
  window.addEventListener('scroll', onScroll); onScroll();

  const navToggle = document.getElementById('navToggle'), navList = document.getElementById('navList');
  if(navToggle) navToggle.addEventListener('click', () => navList.classList.toggle('open'));

  const dict={en:{"nav.home":"Home","nav.projects":"Projects","nav.about":"About Us","hero.badge":"Small gift. Big livelihood.","hero.title":"You can be the reason a family smiles","hero.desc":"Your small contribution is a new ray of hope for the unemployed.","main.title":"Get Involved","main.subtitle":"Choose your path to make a meaningful impact","tab.donate":"Donate","tab.membership":"Rojgar (Membership)","tab.supporter":"Supporter","tab.csr":"CSR Tie-up","section.donate.title":"Make a Donation","section.donate.desc":"Every ‚Çπ you give helps train skills, fund real projects & open a livelihood door.","section.donate.feature1":"80G receipt support","section.donate.feature2":"Direct impact tracking","section.donate.feature3":"UPI / Bank transfer","section.donate.btn":"Donate Now","section.rojgar.title":"Membership Program","section.rojgar.desc":"‚Çπ500/month: training, projects, mentoring, job-connect.","section.rojgar.feature1":"Project labs & gigs","section.rojgar.feature2":"Resume & interview help","section.rojgar.feature3":"Community support","section.rojgar.btn":"Join Now","section.supporter.title":"Supporter Program","section.supporter.desc":"Teach, mentor & help set up micro-business.","section.supporter.feature1":"Flexible time","section.supporter.feature2":"Teach real skills","section.supporter.feature3":"Community reach","section.supporter.btn":"Sign Up","section.csr.title":"CSR Tie-up / Corporate Partnership","section.csr.desc":"Projects, internships, hiring ‡§Ø‡§æ CSR ‡§∏‡•á sustainable impact.","section.csr.feature1":"CSR alignment","section.csr.feature2":"Project outsourcing","section.csr.feature3":"Direct placements","section.csr.btn":"Partner"},hi:{"nav.home":"‡§π‡•ã‡§Æ","nav.projects":"‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü‡•ç‡§∏","nav.about":"‡§π‡§Æ‡§æ‡§∞‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç","hero.badge":"‡§õ‡•ã‡§ü‡§æ ‡§Ø‡•ã‡§ó‡§¶‡§æ‡§®, ‡§¨‡§°‡§º‡§æ ‡§∞‡•ã‡§ú‡§º‡§ó‡§æ‡§∞","hero.title":"‡§Ü‡§™ ‡§ï‡§ø‡§∏‡•Ä ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•Ä ‡§Æ‡•Å‡§∏‡•ç‡§ï‡§æ‡§® ‡§ï‡•Ä ‡§µ‡§ú‡§π ‡§¨‡§® ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç","hero.desc":"‡§Ü‡§™‡§ï‡§æ ‡§õ‡•ã‡§ü‡§æ ‡§∏‡§æ ‡§∏‡§π‡§Ø‡•ã‡§ó ‡§¨‡•á‡§∞‡•ã‡§ú‡§º‡§ó‡§æ‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§à ‡§â‡§Æ‡•ç‡§Æ‡•Ä‡§¶ ‡§π‡•à‡•§","main.title":"‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç","main.subtitle":"‡§∏‡§æ‡§∞‡•ç‡§•‡§ï ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ ‡§∞‡§æ‡§∏‡•ç‡§§‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç","tab.donate":"‡§¶‡§æ‡§® ‡§¶‡•á‡§Ç","tab.membership":"‡§∞‡•ã‡§ú‡§º‡§ó‡§æ‡§∞ (‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ)","tab.supporter":"‡§∏‡§Æ‡§∞‡•ç‡§•‡§ï","tab.csr":"CSR ‡§ü‡§æ‡§à-‡§Ö‡§™","section.donate.title":"‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç","section.donate.desc":"‡§Ü‡§™ ‡§ú‡•ã ‡§≠‡•Ä ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç ‡§µ‡§π ‡§ï‡•å‡§∂‡§≤ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£, ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§µ‡§ø‡§§‡•ç‡§§ ‡§¶‡•á‡§®‡•á ‡§î‡§∞ ‡§∞‡•ã‡§ú‡§º‡§ó‡§æ‡§∞ ‡§ï‡§æ ‡§¶‡•ç‡§µ‡§æ‡§∞ ‡§ñ‡•ã‡§≤‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§","section.donate.feature1":"80G ‡§∞‡§∏‡•Ä‡§¶ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®","section.donate.feature2":"‡§∏‡•Ä‡§ß‡§æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó","section.donate.feature3":"UPI / ‡§¨‡•à‡§Ç‡§ï ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞","section.donate.btn":"‡§Ö‡§≠‡•Ä ‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç","section.rojgar.title":"‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ","section.rojgar.desc":"‚Çπ500/‡§Æ‡§æ‡§π: ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£, ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç, ‡§Æ‡•á‡§Ç‡§ü‡§∞‡§ø‡§Ç‡§ó, ‡§®‡•å‡§ï‡§∞‡•Ä-‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•§","section.rojgar.feature1":"‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ ‡§≤‡•à‡§¨‡•ç‡§∏ ‡§î‡§∞ ‡§ó‡§ø‡§ó‡•ç‡§∏","section.rojgar.feature2":"‡§∞‡§ø‡§ú‡•ç‡§Ø‡•Ç‡§Æ‡•á ‡§î‡§∞ ‡§∏‡§æ‡§ï‡•ç‡§∑‡§æ‡§§‡•ç‡§ï‡§æ‡§∞ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ","section.rojgar.feature3":"‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡§Æ‡§∞‡•ç‡§•‡§®","section.rojgar.btn":"‡§Ö‡§≠‡•Ä ‡§ú‡•Å‡§°‡§º‡•á‡§Ç","section.supporter.title":"‡§∏‡§Æ‡§∞‡•ç‡§•‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ","section.supporter.desc":"‡§™‡§¢‡§º‡§æ‡§è‡§Ç, ‡§Æ‡•á‡§Ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡•á‡§Ç‡•§","section.supporter.feature1":"‡§≤‡§ö‡•Ä‡§≤‡§æ ‡§∏‡§Æ‡§Ø","section.supporter.feature2":"‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§ï‡•å‡§∂‡§≤ ‡§∏‡§ø‡§ñ‡§æ‡§è‡§Ç","section.supporter.feature3":"‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö","section.supporter.btn":"‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç","section.csr.title":"CSR ‡§ü‡§æ‡§à-‡§Ö‡§™ / ‡§ï‡•â‡§∞‡•ç‡§™‡•ã‡§∞‡•á‡§ü ‡§≠‡§æ‡§ó‡•Ä‡§¶‡§æ‡§∞‡•Ä","section.csr.desc":"‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç, ‡§á‡§Ç‡§ü‡§∞‡•ç‡§®‡§∂‡§ø‡§™, ‡§≠‡§∞‡•ç‡§§‡•Ä ‡§Ø‡§æ CSR ‡§∏‡•á ‡§ü‡§ø‡§ï‡§æ‡§ä ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•§","section.csr.feature1":"CSR ‡§∏‡§Ç‡§∞‡•á‡§ñ‡§£","section.csr.feature2":"‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ ‡§Ü‡§â‡§ü‡§∏‡•ã‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó","section.csr.feature3":"‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§ï‡•ç‡§∑ ‡§®‡§ø‡§Ø‡•Å‡§ï‡•ç‡§§‡§ø‡§Ø‡§æ‡§Ç","section.csr.btn":"‡§≠‡§æ‡§ó‡•Ä‡§¶‡§æ‡§∞ ‡§¨‡§®‡•á‡§Ç"}};
  function applyLang(lang){
    document.documentElement.setAttribute('data-lang',lang==='hi'?'hi':'en');
    document.querySelectorAll('[data-i18n]').forEach(el=>{
      const k=el.getAttribute('data-i18n');
      if(dict[lang]&&dict[lang][k]){
        const text = dict[lang][k];
        // For elements with child elements (icons), preserve them
        if(el.children.length > 0){
          // Get all child elements as HTML
          const iconHTML = Array.from(el.children).map(c=>c.outerHTML).join('');
          el.innerHTML = iconHTML + ' ' + text;
        } else {
          // For simple text elements
          el.textContent = text;
        }
      }
    });
    const enBtn=document.getElementById('btn-en'),hiBtn=document.getElementById('btn-hi');
    if(enBtn) enBtn.classList.toggle('active',lang==='en');
    if(hiBtn) hiBtn.classList.toggle('active',lang==='hi');
  }
  const enBtn=document.getElementById('btn-en'), hiBtn=document.getElementById('btn-hi');
  if(enBtn) enBtn.addEventListener('click', ()=>applyLang('en'));
  if(hiBtn) hiBtn.addEventListener('click', ()=>applyLang('hi'));
  applyLang('en');

  const tabBtns = document.querySelectorAll('.tabBtn');
  function setActive(btn){ tabBtns.forEach(b=>b.classList.toggle('active', b===btn)); }
  tabBtns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const target = document.querySelector(btn.dataset.target);
      if(target){ setActive(btn); const y = target.getBoundingClientRect().top + window.pageYOffset - 90; window.scrollTo({ top: y, behavior:'smooth' }); }
    });
  });

  const sections = ['#donate','#rojgar','#supporter','#csr'].map(s=>document.querySelector(s));
  const spy = new IntersectionObserver((entries)=>{ entries.forEach(entry=>{ if(entry.isIntersecting){ const id = '#'+entry.target.id; tabBtns.forEach(b=> b.classList.toggle('active', b.dataset.target===id)); } }); }, { rootMargin:'-55% 0px -40% 0px', threshold:0 });
  sections.forEach(s=>s && spy.observe(s));

  function openModal(el){ el.style.display='flex'; }
  function closeModal(el){ el.style.display='none'; }
  function resetForm(form){ if(form) form.reset(); }

  /* DONATION */
  const donateModal=document.getElementById('donateModal');
  document.getElementById('openDonate2').addEventListener('click', ()=>{ resetDonate(); openModal(donateModal); });
  document.getElementById('closeDonateModal').addEventListener('click', ()=>{ closeModal(donateModal); resetDonate(); });
  donateModal.addEventListener('click', (e)=>{ if(e.target===donateModal){ closeModal(donateModal); resetDonate(); }});

  const donateForm=document.getElementById('donateForm');
  const donateStep1=document.getElementById('donateStep1');
  const donateStepOtp=document.getElementById('donateStepOtp');
  const donateStep2=document.getElementById('donateStep2');
  const HIGH_VALUE = 50000;

  function resetDonate(){ 
    donateForm.reset(); 
    donateStep2.style.display='none';
    donateStepOtp.style.display='none';
    donateStep1.style.display='block';
    document.getElementById('otpSendSection').style.display='block';
    document.getElementById('otpVerifySection').style.display='none';
    if(document.getElementById('otpInput')) document.getElementById('otpInput').value='';
    donateFormData = {};
    // Reset 80G checkbox & conditional fields
    want80G.checked = false;
    set80GVisual(false);
    panField.style.display = 'none';
    addressField.style.display = 'none';
    addressField.dataset.forced = '0';
    addressInput.required = false;
    panInput.required = false;
    panInput.value = '';
    addressInput.value = '';
    // Reset recurring checkbox
    wantRecurring.checked = false;
    setRecurringVisual(false);
    document.getElementById('donateRecurringInfo').style.display = 'none';
    document.getElementById('donateAmountSuffix').textContent = '';
    document.getElementById('razorpayDonateBtn').innerHTML = '<i class="fa-solid fa-lock"></i> Pay Securely Now';
    document.querySelectorAll('.amount-chip').forEach(c => c.classList.remove('active'));
    // Safe check for optional elements
    const doneWrap = document.getElementById('doneWrap');
    if(doneWrap) doneWrap.style.display='none';
    const qrToggle = document.getElementById('qrToggle');
    if(qrToggle) qrToggle.classList.remove('zoomed');
  }

  document.getElementById('amountChips').addEventListener('click', (e)=>{ const btn=e.target.closest('[data-amount]'); if(!btn) return; const amt=document.querySelector('input[name="amount"]'); amt.value=btn.dataset.amount; amt.dispatchEvent(new Event('input',{bubbles:true})); amt.focus(); });

  // 80G checkbox toggle
  const want80G = document.getElementById('want80G');
  const checkBox80G = document.getElementById('checkBox80G');
  const checkIcon80G = document.getElementById('checkIcon80G');
  const panField = document.getElementById('panField');
  const addressField = document.getElementById('addressField');
  const addressInput = document.getElementById('addressInput');
  const panInput = document.getElementById('panInput');

  function set80GVisual(checked){
    checkBox80G.style.background = checked ? '#6153ff' : '#fff';
    checkBox80G.style.borderColor = checked ? '#6153ff' : '#c7d0e4';
    checkIcon80G.style.display = checked ? 'block' : 'none';
  }

  document.getElementById('toggle80G').addEventListener('click', ()=>{
    // Don't toggle if forced by high amount
    if(addressField.dataset.forced === '1') return;
    want80G.checked = !want80G.checked;
    set80GVisual(want80G.checked);
    panField.style.display = want80G.checked ? 'block' : 'none';
    if(!want80G.checked) panInput.value = '';
  });

  // Recurring donation toggle
  const wantRecurring = document.getElementById('wantRecurring');
  const checkBoxRecurring = document.getElementById('checkBoxRecurring');
  const checkIconRecurring = document.getElementById('checkIconRecurring');

  function setRecurringVisual(checked){
    checkBoxRecurring.style.background = checked ? '#3b82f6' : '#fff';
    checkBoxRecurring.style.borderColor = checked ? '#3b82f6' : '#c7d0e4';
    checkIconRecurring.style.display = checked ? 'block' : 'none';
    document.getElementById('toggleRecurring').style.background = checked ? '#dbeafe' : '#f0f7ff';
    document.getElementById('toggleRecurring').style.borderColor = checked ? '#93c5fd' : '#bfdbfe';
  }

  document.getElementById('toggleRecurring').addEventListener('click', ()=>{
    wantRecurring.checked = !wantRecurring.checked;
    setRecurringVisual(wantRecurring.checked);
  });

  // Show/hide conditional fields on amount change
  document.getElementById('donateAmountInput').addEventListener('input', function(){
    const amt = Number(this.value);
    if(amt >= 50000){
      // Force show both PAN + address + check the 80G box
      panField.style.display = 'block';
      addressField.style.display = 'block';
      addressField.dataset.forced = '1';
      addressInput.required = true;
      panInput.required = true;
      want80G.checked = true;
      set80GVisual(true);
    } else {
      // Restore normal state
      addressField.style.display = 'none';
      addressField.dataset.forced = '0';
      addressInput.required = false;
      panInput.required = false;
      // Keep PAN visible if user had ticked 80G manually
      if(!want80G.checked){
        panField.style.display = 'none';
      }
    }
    // Update active chip highlight
    document.querySelectorAll('.amount-chip').forEach(c => c.classList.toggle('active', Number(c.dataset.amount) === amt));
  });

  // Store donate form data for Razorpay flow
  let donateFormData = {};
  donateForm.addEventListener('submit', (e)=>{ 
    e.preventDefault(); 
    if(!donateForm.checkValidity()){ donateForm.reportValidity(); return; }
    donateFormData = {
      amount:   donateForm.querySelector('[name="amount"]').value,
      name:     donateForm.querySelector('[name="name"]').value,
      mobile:   donateForm.querySelector('[name="mobile"]').value,
      email:    donateForm.querySelector('[name="email"]').value,
      pan:      panInput ? panInput.value : '',
      address:  addressInput ? addressInput.value : '',
      want80g:  want80G ? want80G.checked : false,
      recurring: wantRecurring ? wantRecurring.checked : false,
      verified_token: null
    };
    document.getElementById('donateAmountDisplay').textContent = donateFormData.amount;
    // Show/hide recurring info & update suffix + button label
    const isRecurring = donateFormData.recurring;
    document.getElementById('donateRecurringInfo').style.display = isRecurring ? 'block' : 'none';
    document.getElementById('donateAmountSuffix').textContent = isRecurring ? '/month' : '';
    document.getElementById('razorpayDonateBtn').innerHTML = isRecurring
      ? '<i class="fa-solid fa-rotate"></i> Set Up Monthly Donation'
      : '<i class="fa-solid fa-lock"></i> Pay Securely Now';

    if(Number(donateFormData.amount) >= HIGH_VALUE) {
      // Require OTP verification
      document.getElementById('otpEmailDisplay').textContent = donateFormData.email;
      document.getElementById('otpSendSection').style.display='block';
      document.getElementById('otpVerifySection').style.display='none';
      if(document.getElementById('otpInput')) document.getElementById('otpInput').value='';
      donateStep1.style.display='none';
      donateStepOtp.style.display='block';
    } else {
      donateStep1.style.display='none'; 
      donateStep2.style.display='block';
    }
  });

  // OTP: back to form
  document.getElementById('backToFormBtn').addEventListener('click', ()=>{
    donateStepOtp.style.display='none';
    donateStep1.style.display='block';
  });

  // OTP: send OTP
  document.getElementById('sendOtpBtn').addEventListener('click', async () => {
    const btn = document.getElementById('sendOtpBtn');
    btn.disabled = true;
    btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Sending...';
    try {
      const res = await fetch('/api/donation-otp', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ action:'send', email: donateFormData.email, mobile: donateFormData.mobile, name: donateFormData.name, amount: Number(donateFormData.amount) })
      });
      const data = await res.json();
      if(data.ok) {
        FWF_Notify.toast('OTP sent to ' + donateFormData.email, 'success');
        document.getElementById('otpSendSection').style.display='none';
        document.getElementById('otpVerifySection').style.display='block';
      } else {
        FWF_Notify.toast(data.error || 'Failed to send OTP', 'error');
      }
    } catch(e) {
      FWF_Notify.toast('Error sending OTP: ' + e.message, 'error');
    } finally {
      btn.disabled = false;
      btn.innerHTML = '<i class="fa-solid fa-paper-plane"></i> Send OTP to Email';
    }
  });

  // OTP: resend
  document.getElementById('resendOtpLink').addEventListener('click', (e)=>{
    e.preventDefault();
    document.getElementById('otpSendSection').style.display='block';
    document.getElementById('otpVerifySection').style.display='none';
    document.getElementById('sendOtpBtn').click();
  });

  // OTP: verify
  document.getElementById('verifyOtpBtn').addEventListener('click', async () => {
    const btn = document.getElementById('verifyOtpBtn');
    const otp = (document.getElementById('otpInput').value || '').trim();
    if(otp.length !== 6){ FWF_Notify.toast('Enter 6-digit OTP', 'warning'); return; }
    btn.disabled = true;
    btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Verifying...';
    try {
      const res = await fetch('/api/donation-otp', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ action:'verify', email: donateFormData.email, otp })
      });
      const data = await res.json();
      if(data.ok && data.verified_token) {
        donateFormData.verified_token = data.verified_token;
        FWF_Notify.toast('Identity verified! Proceeding to payment.', 'success');
        donateStepOtp.style.display='none';
        donateStep2.style.display='block';
      } else {
        FWF_Notify.toast(data.error || 'Invalid OTP', 'error');
      }
    } catch(e) {
      FWF_Notify.toast('Error verifying OTP: ' + e.message, 'error');
    } finally {
      btn.disabled = false;
      btn.innerHTML = '<i class="fa-solid fa-check-circle"></i> Verify OTP';
    }
  });

  // Razorpay Donate Button
  document.getElementById('razorpayDonateBtn').addEventListener('click', async () => {
    const btn = document.getElementById('razorpayDonateBtn');
    const isRecurring = donateFormData.recurring;
    const BTN_LABEL = isRecurring
      ? '<i class="fa-solid fa-rotate"></i> Set Up Monthly Donation'
      : '<i class="fa-solid fa-lock"></i> Pay Securely Now';
    btn.disabled = true;
    btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> ' + (isRecurring ? 'Setting up subscription...' : 'Creating Order...');
    
    try {
      let options;

      if (isRecurring) {
        // ‚îÄ‚îÄ RECURRING: create a Razorpay subscription ‚îÄ‚îÄ
        const subRes = await fetch('/api/pay/create-donation-subscription', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ amount: Number(donateFormData.amount), name: donateFormData.name, email: donateFormData.email, mobile: donateFormData.mobile })
        });
        const subData = await subRes.json();
        if (!subData.ok) { FWF_Notify.toast(subData.error || 'Failed to create subscription', 'error'); btn.disabled = false; btn.innerHTML = BTN_LABEL; return; }

        btn.innerHTML = BTN_LABEL;

        options = {
          key: subData.key,
          subscription_id: subData.subscription_id,
          name: "FWF - Foundation for Women's Future",
          description: 'Monthly Donation ‚Çπ' + donateFormData.amount + '/month',
          image: '/assets/images/logo.png',
          prefill: { name: donateFormData.name, email: donateFormData.email, contact: donateFormData.mobile },
          theme: { color: '#3b82f6' },
          handler: async function(response) {
            btn.disabled = true;
            btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Recording Donation...';
            try {
              const res = await fetch('/api/pay/donation', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  name: donateFormData.name,
                  mobile: donateFormData.mobile,
                  email: donateFormData.email,
                  pan: donateFormData.pan,
                  address: donateFormData.address,
                  amount: Number(donateFormData.amount),
                  want80g: donateFormData.want80g,
                  recurring: true,
                  razorpay_payment_id: response.razorpay_payment_id,
                  razorpay_subscription_id: response.razorpay_subscription_id,
                  razorpay_signature: response.razorpay_signature
                })
              });
              const data = await res.json();
              if (data.ok) {
                FWF_Notify.modal({
                  title: 'üéâ Monthly Donation Active!',
                  message: `Your monthly donation of ‚Çπ${donateFormData.amount}/month has been set up successfully!<br><br><span style="background:#dbeafe;border:1px solid #bfdbfe;color:#1d4ed8;padding:6px 10px;border-radius:8px;font-size:0.85rem;display:inline-block"><i class="fa-solid fa-rotate"></i> Auto-debits every month ¬∑ Cancel anytime from UPI app</span>${data.receipt80GSent ? '<br><br><span style="background:#f0fdf4;border:1px solid #86efac;color:#166534;padding:6px 10px;border-radius:8px;font-size:0.85rem;display:inline-block">üìÑ 80G Receipt sent to <strong>' + donateFormData.email + '</strong></span>' : ''}<br><br><small style="color:#64748b">Payment ID: ${response.razorpay_payment_id}</small>`,
                  type: 'success',
                  confirmText: 'OK',
                  onConfirm: () => { closeModal(donateModal); resetDonate(); }
                });
              } else {
                FWF_Notify.toast(data.error || 'Error recording donation', 'error', 5000);
              }
            } catch(e) {
              FWF_Notify.toast('Payment successful but recording failed. Contact support with ID: ' + response.razorpay_payment_id, 'warning', 8000);
            } finally { btn.disabled = false; btn.innerHTML = BTN_LABEL; }
          },
          modal: { ondismiss: () => { btn.disabled = false; btn.innerHTML = BTN_LABEL; } }
        };

      } else {
        // ‚îÄ‚îÄ ONE-TIME: create a Razorpay order ‚îÄ‚îÄ
        const orderRes = await fetch('/api/pay/create-order', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ amount: Number(donateFormData.amount), type: 'donation', notes: { name: donateFormData.name, email: donateFormData.email } })
        });
        const orderData = await orderRes.json();
        if (!orderData.ok) { FWF_Notify.toast(orderData.error || 'Failed to create order', 'error'); btn.disabled = false; btn.innerHTML = BTN_LABEL; return; }

        btn.innerHTML = BTN_LABEL;

        options = {
          key: orderData.key,
          amount: orderData.order.amount,
          currency: orderData.order.currency,
          name: "FWF - Foundation for Women's Future",
          description: 'Donation ‚Çπ' + donateFormData.amount,
          image: '/assets/images/logo.png',
          order_id: orderData.order.id,
          prefill: { name: donateFormData.name, email: donateFormData.email, contact: donateFormData.mobile },
          theme: { color: '#ff416c' },
          handler: async function(response) {
            btn.disabled = true;
            btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Recording Donation...';
            try {
              const res = await fetch('/api/pay/donation', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  name: donateFormData.name,
                  mobile: donateFormData.mobile,
                  email: donateFormData.email,
                  pan: donateFormData.pan,
                  address: donateFormData.address,
                  amount: Number(donateFormData.amount),
                  want80g: donateFormData.want80g,
                  verified_token: donateFormData.verified_token,
                  razorpay_payment_id: response.razorpay_payment_id,
                  razorpay_order_id: response.razorpay_order_id,
                  razorpay_signature: response.razorpay_signature
                })
              });
              const data = await res.json();
              if (data.ok) {
                FWF_Notify.modal({
                  title: 'üéâ Thank You!',
                  message: `Your donation of ‚Çπ${donateFormData.amount} has been received successfully!${data.receipt80GSent ? '<br><br><span style="background:#f0fdf4;border:1px solid #86efac;color:#166534;padding:6px 10px;border-radius:8px;font-size:0.85rem;display:inline-block">üìÑ 80G Receipt sent to <strong>' + donateFormData.email + '</strong></span>' : (donateFormData.want80g ? '<br><br><small style="color:#ef4444">80G receipt could not be sent ‚Äî our team will follow up.</small>' : '')}<br><br><small style="color:#64748b">Payment ID: ${response.razorpay_payment_id}</small>${data.pointsEarned ? '<br><small style="color:#22c55e">Points earned: ' + data.pointsEarned + '</small>' : ''}`,
                  type: 'success',
                  confirmText: 'OK',
                  onConfirm: () => { closeModal(donateModal); resetDonate(); }
                });
              } else {
                FWF_Notify.toast(data.error || 'Error recording donation', 'error', 5000);
              }
            } catch(e) {
              FWF_Notify.toast('Payment successful but recording failed. Contact support with ID: ' + response.razorpay_payment_id, 'warning', 8000);
            } finally { btn.disabled = false; btn.innerHTML = BTN_LABEL; }
          },
          modal: { ondismiss: () => { btn.disabled = false; btn.innerHTML = BTN_LABEL; } }
        };
      }

      const rzp = new Razorpay(options);
      rzp.on('payment.failed', (resp) => { FWF_Notify.toast('Payment failed: ' + (resp.error.description || 'Unknown error'), 'error'); btn.disabled = false; btn.innerHTML = BTN_LABEL; });
      rzp.open();
    } catch(e) {
      FWF_Notify.toast('Error: ' + e.message, 'error');
      btn.disabled = false;
      btn.innerHTML = isRecurring ? '<i class="fa-solid fa-rotate"></i> Set Up Monthly Donation' : '<i class="fa-solid fa-lock"></i> Pay Securely Now';
    }
  });

  /* MEMBERSHIP (2-step) */
  const memberModal=document.getElementById('memberModal');
  const memberForm=document.getElementById('memberForm');
  const memberStep1=document.getElementById('memberStep1');
  const memberStep2=document.getElementById('memberStep2');

  document.getElementById('openMember2').addEventListener('click', ()=>{ resetForm(memberForm); memberStep2.style.display='none'; memberStep1.style.display='block'; openModal(memberModal); });
  document.getElementById('closeMember').addEventListener('click', ()=> closeModal(memberModal));
  memberModal.addEventListener('click', (e)=>{ if(e.target===memberModal) closeModal(memberModal); });

  memberForm.addEventListener('submit', async (e)=>{
    e.preventDefault();
    if(!memberForm.checkValidity()){ memberForm.reportValidity(); return; }
    const submitBtn = memberForm.querySelector('button[type="submit"]');
    const origLabel = submitBtn.innerHTML;
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Checking...';
    try {
      const m = memberForm.querySelector('[name="mobile"]').value.trim();
      const em = memberForm.querySelector('[name="email"]').value.trim();
      const chk = await fetch('/api/pay/check-member', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({mobile:m, email:em}) });
      const chkData = await chk.json();
      if(!chkData.ok){ FWF_Notify.toast(chkData.error || 'This mobile/email is already registered. Please login.', 'error', 5000); return; }
      memberStep1.style.display='none'; memberStep2.style.display='block';
    } catch(err){ FWF_Notify.toast('Could not verify. Please try again.', 'error'); }
    finally { submitBtn.disabled = false; submitBtn.innerHTML = origLabel; }
  });

  // Razorpay Membership Button ‚Äî Subscription / UPI AutoPay
  document.getElementById('razorpayMemberBtn').addEventListener('click', async () => {
    const btn = document.getElementById('razorpayMemberBtn');
    const formData = {
      name:    memberForm.querySelector('[name="name"]').value.trim(),
      mobile:  memberForm.querySelector('[name="mobile"]').value.trim(),
      email:   memberForm.querySelector('[name="email"]').value.trim(),
      project: memberForm.querySelector('[name="project"]').value
    };
    const BTN_LABEL = '<i class="fa-solid fa-lock"></i> Pay ‚Çπ500 &amp; Enable AutoPay';

    btn.disabled = true;
    btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Setting up subscription...';

    try {
      // Create a Razorpay subscription (plan + autopay mandate)
      const subRes = await fetch('/api/pay/create-subscription', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name: formData.name, email: formData.email, mobile: formData.mobile })
      });
      const subData = await subRes.json();
      if (!subData.ok) {
        FWF_Notify.toast(subData.error || 'Failed to create subscription', 'error');
        btn.disabled = false; btn.innerHTML = BTN_LABEL; return;
      }

      btn.innerHTML = BTN_LABEL;

      const options = {
        key: subData.key,
        subscription_id: subData.subscription_id,
        name: "FWF - Foundation for Women's Future",
        description: 'Monthly Membership ‚Çπ500/month',
        image: '/assets/images/logo.png',
        prefill: { name: formData.name, email: formData.email, contact: formData.mobile },
        theme: { color: '#6153ff' },
        handler: async function(response) {
          btn.disabled = true;
          btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> Registering...';
          try {
            const regRes = await fetch('/api/pay/membership', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                name:    formData.name,
                mobile:  formData.mobile,
                email:   formData.email,
                project: formData.project,
                razorpay_payment_id:      response.razorpay_payment_id,
                razorpay_subscription_id: response.razorpay_subscription_id,
                razorpay_signature:       response.razorpay_signature
              })
            });
            const data = await regRes.json();
            if (data.ok) {
              // Save to MongoDB for welcome email
              try {
                await fetch('/api/join', { method: 'POST', headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({ fullName: formData.name, mobile: formData.mobile, email: formData.email, project: formData.project, paymentRef: response.razorpay_payment_id }) });
              } catch(e) {}
              // Close modal + reset to step 1 immediately
              closeModal(memberModal);
              memberStep2.style.display='none'; memberStep1.style.display='block';
              memberForm.reset();
              FWF_Notify.modal({
                title: 'üéâ Welcome to FWF!',
                message: `<strong>Member ID:</strong> ${data.memberId}<br><strong>Password:</strong> <code style="background:#f1f5f9;padding:4px 8px;border-radius:6px;font-weight:700;color:#f5576c">${data.password}</code><br><br><div style="background:#f0fdf4;border:1px solid #86efac;border-radius:8px;padding:10px;margin-top:8px;font-size:0.85rem;color:#166534"><i class="fa-solid fa-rotate"></i> <strong>UPI AutoPay activated</strong> ‚Äî ‚Çπ500 will auto-debit monthly</div><br><small style="color:#64748b">Payment ID: ${response.razorpay_payment_id}<br>Credentials sent to your email</small>`,
                type: 'success',
                confirmText: 'Login to Dashboard',
                onConfirm: () => { window.location.href = '/login'; }
              });
            } else {
              FWF_Notify.toast(data.error || 'Registration failed. Contact support with ID: ' + response.razorpay_payment_id, 'error', 6000);
              // Go back to form step so user can correct details
              memberStep2.style.display='none'; memberStep1.style.display='block';
            }
          } catch(e) {
            FWF_Notify.toast('Payment received! Contact support with ID: ' + response.razorpay_payment_id, 'warning', 8000);
          } finally { btn.disabled = false; btn.innerHTML = BTN_LABEL; }
        },
        modal: { ondismiss: () => { btn.disabled = false; btn.innerHTML = BTN_LABEL; memberStep2.style.display='none'; memberStep1.style.display='block'; } }
      };
      const rzp = new Razorpay(options);
      rzp.on('payment.failed', (resp) => { FWF_Notify.toast('Payment failed: ' + (resp.error.description || 'Unknown error'), 'error'); btn.disabled = false; btn.innerHTML = BTN_LABEL; });
      rzp.open();
    } catch(e) {
      FWF_Notify.toast('Error: ' + e.message, 'error');
      btn.disabled = false;
      btn.innerHTML = BTN_LABEL;
    }
  });

  /* SUPPORTER */
  const supModal=document.getElementById('supModal');
  document.getElementById('openSupporter2').addEventListener('click', ()=>{ resetForm(document.getElementById('supForm')); openModal(supModal); });
  document.getElementById('closeSupporter').addEventListener('click', ()=> closeModal(supModal));
  supModal.addEventListener('click', (e)=>{ if(e.target===supModal) closeModal(supModal); });
  document.getElementById('supForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const f = e.target;
    if(!f.checkValidity()){ f.reportValidity(); return; }
    const btn = f.querySelector('button[type="submit"]');
    const origLabel = btn.innerHTML;
    btn.disabled = true;
    btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Registering...';
    try {
      const fd = new FormData(f);
      const res = await fetch('/api/pay/register-supporter', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          name: fd.get('name'),
          mobile: fd.get('mobile'),
          email: fd.get('email'),
          project: fd.get('project'),
          message: fd.get('message')
        })
      });
      const data = await res.json();
      if (!res.ok || !data.ok) {
        FWF_Notify.toast(data.error || 'Registration failed', 'error', 5000);
        btn.disabled = false; btn.innerHTML = origLabel;
        return;
      }
      // Show success
      f.innerHTML = `
        <div style="text-align:center;padding:24px 0">
          <div style="font-size:56px;margin-bottom:12px">üéâ</div>
          <h3 style="color:#10b981;margin:0 0 8px">Welcome, Supporter!</h3>
          <p style="color:#374151;margin:0 0 16px">Your Supporter ID is:</p>
          <div style="background:#f0fdf4;border:2px solid #10b981;border-radius:10px;padding:16px;font-size:1.4rem;font-weight:800;color:#059669;letter-spacing:1px;margin-bottom:16px">${data.supporterId}</div>
          ${data.emailSent
            ? `<p style="color:#6b7280;font-size:0.9rem;margin:0 0 20px"><i class="fa-solid fa-envelope" style="color:#10b981"></i> Login credentials have been sent to your email.</p>`
            : `<div style="background:#fef3c7;border:1px solid #f59e0b;border-radius:8px;padding:12px 14px;margin-bottom:16px;text-align:left">
                <p style="margin:0 0 6px;color:#92400e;font-weight:700;font-size:0.9rem"><i class="fa-solid fa-triangle-exclamation"></i> Email could not be sent automatically.</p>
                <p style="margin:0;color:#78350f;font-size:0.85rem">Please note your Supporter ID <strong>${data.supporterId}</strong> and contact us at <a href="mailto:info@fwfindia.org" style="color:#92400e">info@fwfindia.org</a> to receive your login credentials.</p>
               </div>`
          }
          <a href="/login" class="btn-primary" style="display:inline-block;text-decoration:none;padding:12px 32px;border-radius:8px"><i class="fa-solid fa-right-to-bracket"></i> Login Now</a>
        </div>`;
    } catch(err) {
      FWF_Notify.toast('Network error: ' + err.message, 'error');
      btn.disabled = false; btn.innerHTML = origLabel;
    }
  });

  /* PARTNER */
  const partnerModal=document.getElementById('partnerModal');
  document.getElementById('openPartner2').addEventListener('click', ()=>{ resetForm(document.getElementById('partnerForm')); openModal(partnerModal); });
  document.getElementById('closePartner').addEventListener('click', ()=> closeModal(partnerModal));
  partnerModal.addEventListener('click', (e)=>{ if(e.target===partnerModal) closeModal(partnerModal); });
  document.getElementById('partnerForm').addEventListener('submit', (e)=>{ e.preventDefault(); if(!e.target.checkValidity()){ e.target.reportValidity(); return;} FWF_Notify.toast('Thanks! CSR partnership request received. Our team will contact you.', 'success', 5000); closeModal(partnerModal); });

  // Auto-open donateModal when navigated via URL hash (placed last, after all vars/fns are defined)
  if(window.location.hash === '#donateModal') {
    resetDonate(); openModal(donateModal);
  }
  // Auto-open memberModal when navigated via URL hash
  if(window.location.hash === '#memberModal') {
    resetForm(memberForm); memberStep2.style.display='none'; memberStep1.style.display='block'; openModal(memberModal);
  }
  // Auto-open supporterModal when navigated via URL hash
  if(window.location.hash === '#supporterModal') {
    resetForm(document.getElementById('supForm')); openModal(supModal);
  }
</script>
</body>
</html>
