<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
  <meta name="theme-color" content="#0b1220" />
  <title>Donate ‚Äî FWF</title>
  <link rel="manifest" href="../manifest.json">
  <link rel="icon" href="../assets/images/logo.png">
  <link href="../assets/css/fwf-app.css" rel="stylesheet">
  <style>
    /* Impact cards */
    .impact-row { display: flex; flex-direction: column; gap: 10px; }
    .impact-card {
      display: flex; align-items: center; gap: 14px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 14px 16px;
    }
    .impact-amt {
      font-size: 18px; font-weight: 800;
      color: var(--primary); min-width: 60px;
    }
    .impact-desc { font-size: 13px; color: var(--text2); margin: 0; }

    /* Payment info box */
    .pay-info-box {
      background: rgba(59,130,246,0.1);
      border: 1px solid rgba(59,130,246,0.25);
      border-radius: var(--radius-sm);
      padding: 14px 16px;
      margin-bottom: 16px;
      display: none;
    }
    .pay-info-box.show { display: block; }
    .pay-info-box h5 {
      font-size: 13px; color: #93c5fd; margin-bottom: 8px;
      display: flex; align-items: center; gap: 6px;
    }
    .pay-info-box p { font-size: 13px; color: var(--text2); margin-bottom: 4px; }
    .pay-info-box strong { color: var(--text); }

    /* Trust badges */
    .trust-row { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 16px; }
    .trust-badge {
      display: flex; align-items: center; gap: 5px;
      font-size: 11px; color: var(--text3);
    }
    .trust-badge i { color: var(--green); font-size: 12px; }
  </style>
</head>
<body>

  <!-- Top Bar -->
  <header class="app-topbar">
    <div class="brand">
      <img src="../assets/images/logo.png" alt="FWF">
      <div>
        <div class="brand-text">Donate</div>
        <div class="brand-sub">Support our mission</div>
      </div>
    </div>
  </header>

  <!-- Impact section -->
  <div class="app-section">
    <div class="section-head">
      <h2>‚ù§Ô∏è Your Impact</h2>
      <p>Every rupee directly supports women's empowerment</p>
    </div>
    <div class="impact-row">
      <div class="impact-card">
        <div class="impact-amt">‚Çπ500</div>
        <p class="impact-desc">Provides skill training materials for one woman</p>
      </div>
      <div class="impact-card">
        <div class="impact-amt">‚Çπ1,000</div>
        <p class="impact-desc">Supports one woman's training for a month</p>
      </div>
      <div class="impact-card">
        <div class="impact-amt">‚Çπ5,000</div>
        <p class="impact-desc">Funds complete training &amp; job placement for one woman</p>
      </div>
    </div>
  </div>

  <!-- Donation Form -->
  <div class="app-section" style="margin-top:8px;">
    <div class="section-head">
      <h2>Make a Donation</h2>
    </div>

    <div id="alertBox" class="app-alert mb-16"></div>

    <form id="donationForm">
      <!-- Amount Selection -->
      <div class="form-group">
        <label class="form-label">Select Amount</label>
        <div class="amount-grid">
          <div class="amount-pill" onclick="selectAmount(500, this)">
            <div class="av">‚Çπ500</div><div class="al">Starter</div>
          </div>
          <div class="amount-pill" onclick="selectAmount(1000, this)">
            <div class="av">‚Çπ1,000</div><div class="al">Supporter</div>
          </div>
          <div class="amount-pill" onclick="selectAmount(2500, this)">
            <div class="av">‚Çπ2,500</div><div class="al">Champion</div>
          </div>
          <div class="amount-pill" onclick="selectAmount(5000, this)">
            <div class="av">‚Çπ5,000</div><div class="al">Patron</div>
          </div>
          <div class="amount-pill" onclick="selectAmount(10000, this)">
            <div class="av">‚Çπ10,000</div><div class="al">Benefactor</div>
          </div>
          <div class="amount-pill" onclick="selectAmount('custom', this)">
            <div class="av">‚Çπ<i class="fas fa-pen" style="font-size:12px;"></i></div>
            <div class="al">Custom</div>
          </div>
        </div>
        <input type="hidden" name="amount" id="donationAmount" required>
      </div>

      <div class="form-group" id="customAmountField" style="display:none;">
        <label class="form-label">Custom Amount (‚Çπ)</label>
        <input class="form-input" type="number" id="customAmount" min="100" placeholder="Enter amount" oninput="setCustomAmount()">
      </div>

      <!-- Donor Details -->
      <div class="form-group">
        <label class="form-label">Full Name *</label>
        <input class="form-input" type="text" name="name" required placeholder="Your name">
      </div>
      <div class="form-group">
        <label class="form-label">Mobile Number *</label>
        <input class="form-input" type="tel" name="mobile" required pattern="[0-9]{10}" placeholder="10-digit mobile">
      </div>
      <div class="form-group">
        <label class="form-label">Email</label>
        <input class="form-input" type="email" name="email" placeholder="Optional">
      </div>
      <div class="form-group">
        <label class="form-label">PAN Number (for 80G tax benefit)</label>
        <input class="form-input" type="text" name="pan" pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" placeholder="Optional" style="text-transform:uppercase;">
      </div>

      <!-- Payment Method -->
      <div class="form-group">
        <label class="form-label">Payment Method *</label>
        <select class="form-select" name="paymentMethod" required onchange="togglePaymentInfo(this.value)">
          <option value="">Select method</option>
          <option value="upi">UPI</option>
          <option value="bank">Bank Transfer</option>
          <option value="cash">Cash</option>
        </select>
      </div>

      <!-- Payment Info -->
      <div class="pay-info-box" id="paymentInfo">
        <h5><i class="fas fa-info-circle"></i> Payment Details</h5>
        <div id="upiInfo" style="display:none;">
          <p><strong>UPI ID:</strong> fwf@paytm</p>
          <p><strong>Name:</strong> FWF Foundation</p>
        </div>
        <div id="bankInfo" style="display:none;">
          <p><strong>Account Name:</strong> FWF Foundation</p>
          <p><strong>Account No:</strong> 1234567890</p>
          <p><strong>IFSC:</strong> SBIN0001234</p>
          <p><strong>Bank:</strong> State Bank of India</p>
        </div>
        <p style="margin-top:8px;font-size:12px;color:var(--text3);">After payment, upload screenshot below</p>
      </div>

      <div class="form-group">
        <label class="form-label">Transaction ID / Reference</label>
        <input class="form-input" type="text" name="transactionId" placeholder="Optional">
      </div>

      <!-- Payment Proof Upload -->
      <div class="form-group">
        <label class="form-label">Payment Screenshot</label>
        <div class="file-zone" onclick="document.getElementById('paymentProof').click()">
          <input type="file" id="paymentProof" name="paymentProof" accept="image/*" style="display:none;" onchange="previewFile(this)">
          <div id="filePreview">
            <i class="fas fa-cloud-upload-alt"></i>
            <p><strong>Tap to upload proof</strong></p>
            <p style="font-size:11px;color:var(--text3);margin:0;">Optional ¬∑ JPG, PNG</p>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Message (Optional)</label>
        <textarea class="form-textarea" name="message" rows="2" placeholder="Share your thoughts..."></textarea>
      </div>

      <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
        <i class="fas fa-heart"></i> Donate Now
      </button>

      <!-- Trust -->
      <div class="trust-row">
        <div class="trust-badge"><i class="fas fa-check-circle"></i> 100% Transparent</div>
        <div class="trust-badge"><i class="fas fa-check-circle"></i> 80G Tax Benefit</div>
        <div class="trust-badge"><i class="fas fa-check-circle"></i> Direct Impact</div>
        <div class="trust-badge"><i class="fas fa-check-circle"></i> Regular Updates</div>
      </div>
    </form>
  </div>

  <!-- Rich Footer -->
  <footer class="app-footer">
    <div class="footer-brand-row">
      <img src="../assets/images/logo.png" alt="FWF">
      <div>
        <div class="footer-brand-name">Foundris Welfare Foundation</div>
        <div class="footer-brand-tagline">Skills ‚Üí Livelihood ‚Üí Aatmnirbharta üáÆüá≥</div>
      </div>
    </div>
    <div class="footer-socials" style="justify-content:center;margin:14px 0 10px;">
      <a href="https://www.facebook.com/fwfindia" target="_blank" aria-label="Facebook" style="background:rgba(24,119,242,0.15);border-color:rgba(24,119,242,0.3);color:#1877f2"><i class="fab fa-facebook-f"></i></a>
      <a href="https://www.instagram.com/fwfindia" target="_blank" aria-label="Instagram" style="background:rgba(225,48,108,0.15);border-color:rgba(225,48,108,0.3);color:#e1306c"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/919580118412" target="_blank" aria-label="WhatsApp" style="background:rgba(37,211,102,0.15);border-color:rgba(37,211,102,0.3);color:#25d366"><i class="fab fa-whatsapp"></i></a>
      <a href="https://youtube.com/@fwf_india" target="_blank" aria-label="YouTube" style="background:rgba(255,0,0,0.15);border-color:rgba(255,0,0,0.3);color:#ff0000"><i class="fab fa-youtube"></i></a>
    </div>
    <div class="footer-bar">
      <span class="footer-bar-copy">&copy; 2024‚Äì2026 FWF. All rights reserved.</span>
      <div class="footer-bar-links">
        <a href="/privacy">Privacy</a>
        <a href="/terms">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Bottom Tab Bar -->
  <nav class="app-tabs">
    <a href="/m/home" class="tab-item">
      <i class="fas fa-home"></i><span>Home</span>
    </a>
    <a href="/m/projects" class="tab-item">
      <i class="fas fa-briefcase"></i><span>Projects</span>
    </a>
    <a href="https://www.fwfindia.org/donation#memberModal" class="tab-item tab-join">
      <div class="tab-fab"><i class="fas fa-plus"></i></div>
      <span>Join</span>
    </a>
    <a href="/m/donation" class="tab-item active">
      <i class="fas fa-heart"></i><span>Donate</span>
    </a>
    <a href="/m/member-login" class="tab-item">
      <i class="fas fa-user"></i><span>Login</span>
    </a>
  </nav>

  <script>
    let selectedAmount = null;

    function selectAmount(amount, el) {
      document.querySelectorAll('.amount-pill').forEach(p => p.classList.remove('sel'));
      el.classList.add('sel');
      if (amount === 'custom') {
        document.getElementById('customAmountField').style.display = 'block';
        document.getElementById('donationAmount').value = '';
      } else {
        document.getElementById('customAmountField').style.display = 'none';
        document.getElementById('donationAmount').value = amount;
        selectedAmount = amount;
      }
    }

    function setCustomAmount() {
      const v = document.getElementById('customAmount').value;
      document.getElementById('donationAmount').value = v;
      selectedAmount = v;
    }

    function togglePaymentInfo(method) {
      const box = document.getElementById('paymentInfo');
      document.getElementById('upiInfo').style.display = 'none';
      document.getElementById('bankInfo').style.display = 'none';
      if (method) {
        box.classList.add('show');
        if (method === 'upi')  document.getElementById('upiInfo').style.display = 'block';
        if (method === 'bank') document.getElementById('bankInfo').style.display = 'block';
      } else {
        box.classList.remove('show');
      }
    }

    function previewFile(input) {
      const preview = document.getElementById('filePreview');
      const file = input.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = e => {
          preview.innerHTML = `<img src="${e.target.result}" style="max-width:100%;max-height:180px;border-radius:8px;" alt="Preview">`;
        };
        reader.readAsDataURL(file);
      }
    }

    function showAlert(msg, type) {
      const a = document.getElementById('alertBox');
      a.textContent = msg;
      a.className = 'app-alert show ' + type;
      window.scrollTo(0, 0);
      setTimeout(() => a.classList.remove('show'), 5000);
    }

    document.getElementById('donationForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!document.getElementById('donationAmount').value) {
        showAlert('Please select or enter donation amount', 'error');
        return;
      }
      const btn = document.getElementById('submitBtn');
      btn.disabled = true;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
      try {
        const fd = new FormData(this);
        const res = await fetch('/api/contact', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: fd.get('name'), mobile: fd.get('mobile'), email: fd.get('email'),
            message: `Donation: ‚Çπ${fd.get('amount')} | Payment: ${fd.get('paymentMethod')} | PAN: ${fd.get('pan')||'N/A'} | Ref: ${fd.get('transactionId')||'N/A'} | Note: ${fd.get('message')||'N/A'}`,
            subject: 'Donation Received'
          })
        });
        const data = await res.json();
        if (data.ok || res.ok) {
          showAlert('üôè Thank you for your generous donation! We will contact you shortly.', 'success');
          this.reset();
          document.querySelectorAll('.amount-pill').forEach(p => p.classList.remove('sel'));
          document.getElementById('customAmountField').style.display = 'none';
          document.getElementById('filePreview').innerHTML = '<i class="fas fa-cloud-upload-alt"></i><p><strong>Tap to upload proof</strong></p><p style="font-size:11px;color:var(--text3);margin:0;">Optional ¬∑ JPG, PNG</p>';
          selectedAmount = null;
        } else {
          throw new Error(data.error || 'Donation submission failed');
        }
      } catch(err) {
        showAlert('‚ùå ' + err.message, 'error');
      } finally {
        btn.disabled = false;
        btn.innerHTML = '<i class="fas fa-heart"></i> Donate Now';
      }
    });
  </script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
</body>
</html>
